@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["PageNotFoundTitle"];
    ViewData["FullWidth"] = true;
    Layout = "_AuthLayout";
}

<!-- Responsive 404 Page - Mobile First Design -->
<div class="w-full min-h-[calc(100vh-12rem)] flex flex-col items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12">
    
    <!-- Main 404 Content -->
    <div class="w-full max-w-4xl mx-auto space-y-8 sm:space-y-10 md:space-y-12 animate-in fade-in duration-1000">
        
        <!-- 404 Visual Section -->
        <div class="text-center space-y-6 sm:space-y-8 md:space-y-10">
            <div class="relative inline-flex items-center justify-center group">
                <!-- Background Glow Effect -->
                <div class="absolute -inset-4 sm:-inset-6 md:-inset-8 bg-primary/10 rounded-full blur-2xl sm:blur-3xl group-hover:bg-primary/20 transition-all duration-1000"></div>
                
                <!-- Large 404 Text (Responsive) -->
                <div class="text-6xl sm:text-8xl md:text-9xl lg:text-[12rem] font-black text-foreground/5 tracking-tighter leading-none select-none">404</div>
                
                <!-- Compass Icon Container (Responsive) -->
                <div class="absolute inset-0 flex items-center justify-center translate-y-2 sm:translate-y-3 md:translate-y-4">
                    <div class="w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 lg:w-48 lg:h-48 rounded-2xl sm:rounded-3xl md:rounded-[3.5rem] bg-card/60 backdrop-blur-xl border border-border/50 flex flex-col items-center justify-center text-primary shadow-xl sm:shadow-2xl group-hover:-translate-y-1 sm:group-hover:-translate-y-2 transition-transform duration-700">
                        <i data-lucide="compass" class="w-8 h-8 sm:w-12 sm:h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 animate-[spin_12s_linear_infinite]"></i>
                        <span class="mt-2 sm:mt-3 md:mt-4 text-[8px] sm:text-[9px] md:text-[10px] font-black uppercase tracking-[0.2em] sm:tracking-[0.3em] opacity-40">@Localizer["CompassLost"]</span>
                    </div>
                </div>
            </div>
            
            <!-- Title and Description (Responsive) -->
            <div class="space-y-3 sm:space-y-4 relative z-10 px-4 sm:px-6">
                <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black text-foreground tracking-tighter leading-tight uppercase">
                    @Localizer["CoordinateNotFound"]
                </h1>
                <p class="text-xs sm:text-sm font-medium text-muted-foreground max-w-xs sm:max-w-md mx-auto uppercase tracking-wide sm:tracking-widest opacity-60 leading-relaxed">
                    @Localizer["PageNotFoundDescription"]
                </p>
            </div>
        </div>

        <!-- Action Buttons (Responsive) -->
        <div class="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 px-4 sm:px-0">
            <button onclick="history.back()" class="w-full sm:w-auto px-6 sm:px-8 md:px-12 py-3 sm:py-4 md:py-5 bg-muted/50 border border-border/50 rounded-xl sm:rounded-2xl text-[9px] sm:text-[10px] font-black uppercase tracking-wide sm:tracking-widest hover:border-primary hover:bg-muted/70 transition-all flex items-center justify-center gap-2 sm:gap-3 min-h-[44px] touch-manipulation">
                <i data-lucide="arrow-left" class="w-3 h-3 sm:w-4 sm:h-4"></i> 
                @Localizer["GoBack"]
            </button>
            <a asp-controller="Feed" asp-action="Index" class="w-full sm:w-auto px-6 sm:px-8 md:px-12 py-3 sm:py-4 md:py-5 bg-primary text-primary-foreground rounded-xl sm:rounded-2xl text-[9px] sm:text-[10px] font-black uppercase tracking-wide sm:tracking-widest shadow-lg sm:shadow-xl shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-1 active:scale-[0.98] transition-all flex items-center justify-center gap-2 sm:gap-3 min-h-[44px] touch-manipulation">
                @Localizer["GoHome"] <i data-lucide="home" class="w-3 h-3 sm:w-4 sm:h-4"></i>
            </a>
        </div>

        <!-- Diagnostic Information (Responsive) -->
        <div class="bg-card/30 backdrop-blur-md border border-border/40 rounded-2xl sm:rounded-3xl md:rounded-[2.5rem] p-4 sm:p-6 md:p-8 lg:p-10 mt-8 sm:mt-10 md:mt-12 overflow-hidden relative group/inspect mx-4 sm:mx-0">
            <!-- Background Icon -->
            <div class="absolute top-2 right-2 sm:top-4 sm:right-4 md:top-6 md:right-6 opacity-10">
                <i data-lucide="microscope" class="w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 lg:w-24 lg:h-24"></i>
            </div>
            
            <!-- Diagnostic Content -->
            <div class="space-y-4 sm:space-y-6 relative z-10">
                <h4 class="text-[9px] sm:text-[10px] md:text-xs font-black uppercase tracking-[0.15em] sm:tracking-[0.2em] text-foreground border-l-2 sm:border-l-4 border-primary pl-3 sm:pl-4">
                    @Localizer["DiagnosticTrace"]
                </h4>
                
                <!-- Diagnostic Grid (Responsive) -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 md:gap-8 text-[8px] sm:text-[9px] md:text-[10px] font-black uppercase tracking-wide sm:tracking-widest opacity-40">
                    <div class="space-y-1 sm:space-y-2">
                        <span class="block">@Localizer["NodeState"]: @Localizer["Void"]</span>
                        <span class="block">@Localizer["Protocol"]: HTTPS/2</span>
                        <span class="block sm:hidden">@Localizer["TraceId"]: @Guid.NewGuid().ToString().Substring(0, 8).ToUpper()</span>
                    </div>
                    <div class="space-y-1 sm:space-y-2">
                        <span class="hidden sm:block">@Localizer["TraceId"]: @Guid.NewGuid().ToString().Substring(0, 12).ToUpper()</span>
                        <span class="block">@Localizer["Handshake"]: @Localizer["Failed"]</span>
                        <span class="block">@Localizer["Timestamp"]: @DateTime.Now.ToString("HH:mm:ss")</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Help Section (Mobile Optimized) -->
        <div class="text-center space-y-3 sm:space-y-4 px-4 sm:px-0">
            <p class="text-xs sm:text-sm text-muted-foreground opacity-60">
                @Localizer["NeedHelp"]
            </p>
            <div class="flex flex-wrap items-center justify-center gap-2 sm:gap-4 text-xs">
                <a href="/contact" class="text-primary hover:text-primary/80 transition-colors underline underline-offset-2">
                    @Localizer["ContactSupport"]
                </a>
                <span class="text-muted-foreground/40">•</span>
                <a href="/help" class="text-primary hover:text-primary/80 transition-colors underline underline-offset-2">
                    @Localizer["HelpCenter"]
                </a>
                <span class="text-muted-foreground/40">•</span>
                <a href="/sitemap" class="text-primary hover:text-primary/80 transition-colors underline underline-offset-2">
                    @Localizer["Sitemap"]
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Custom Styles for 404 Page -->
<style>
    /* Enhanced responsive animations */
    @@keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .animate-in.fade-in {
        animation: fade-in 0.8s ease-out;
    }
    
    /* Mobile-specific improvements */
    @@media (max-width: 640px) {
        .glass-card {
            border-radius: 0 !important;
            margin: 0 !important;
        }
        
        /* Improve touch targets */
        button, a {
            min-height: 44px;
            touch-action: manipulation;
        }
        
        /* Better text scaling */
        .tracking-widest {
            letter-spacing: 0.1em;
        }
    }
    
    /* Tablet optimizations */
    @@media (min-width: 641px) and (max-width: 1024px) {
        .glass-card {
            margin: 1rem;
        }
    }
    
    /* Prevent horizontal scroll */
    body {
        overflow-x: hidden;
    }
    
    /* Enhanced hover effects for desktop */
    @@media (min-width: 1024px) {
        .group:hover .animate-[spin_12s_linear_infinite] {
            animation-duration: 8s;
        }
    }
    
    /* RTL Support */
    [dir="rtl"] .border-l-2,
    [dir="rtl"] .border-l-4 {
        border-left: none;
        border-right: 2px solid hsl(var(--primary));
        padding-left: 0;
        padding-right: 0.75rem;
    }
    
    [dir="rtl"] .sm\\:border-l-4 {
        border-right-width: 4px;
        padding-right: 1rem;
    }
    
    /* Dark mode optimizations */
    .dark .bg-card\/30 {
        background-color: hsl(var(--card) / 0.4);
    }
    
    .dark .shadow-primary\/20 {
        box-shadow: 0 10px 15px -3px hsl(var(--primary) / 0.3);
    }
</style>

@section Scripts {
    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        
        // Add smooth scroll behavior
        document.documentElement.style.scrollBehavior = 'smooth';
        
        // Enhanced mobile interactions
        if ('ontouchstart' in window) {
            // Add touch feedback for buttons
            document.querySelectorAll('button, a').forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                element.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
        }
        
        // Accessibility improvements
        document.addEventListener('keydown', function(e) {
            // Allow Enter key to trigger back button
            if (e.key === 'Enter' && e.target.tagName === 'BUTTON') {
                e.target.click();
            }
            
            // Allow Escape key to go back
            if (e.key === 'Escape') {
                history.back();
            }
        });
        
        // Performance optimization - reduce animations on low-end devices
        if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {
            document.documentElement.style.setProperty('--animation-duration', '0.3s');
        }
    </script>
}
