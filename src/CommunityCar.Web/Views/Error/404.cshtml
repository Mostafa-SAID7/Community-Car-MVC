@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@{
    ViewData["Title"] = Localizer["PageNotFoundTitle"];
    ViewData["FullWidth"] = true;
    Layout = "_AuthLayout";
}

<!-- Responsive 404 Page - Mobile First Design -->
<div class="w-100 d-flex flex-column align-items-center justify-content-center p-3 p-sm-4 p-md-5" style="min-height: calc(100vh - 12rem);">
    
    <!-- Main 404 Content -->
    <div class="w-100 mx-auto vstack gap-4 gap-sm-5 animate-in fade-in" style="max-width: 56rem; animation-duration: 1s;">
        
        <!-- 404 Visual Section -->
        <div class="text-center vstack gap-4 gap-sm-5">
            <div class="position-relative d-inline-flex align-items-center justify-content-center">
                <!-- Background Glow Effect -->
                <div class="position-absolute bg-primary bg-opacity-10 rounded-circle" style="inset: -1rem; filter: blur(3rem); transition: all 1s;"></div>
                
                <!-- Large 404 Text (Responsive) -->
                <div class="text-muted text-opacity-25 fw-black lh-1 user-select-none" style="font-size: clamp(6rem, 15vw, 12rem); letter-spacing: -0.05em;">404</div>
                
                <!-- Compass Icon Container (Responsive) -->
                <div class="position-absolute top-50 start-50 translate-middle" style="margin-top: 0.5rem;">
                    <div class="rounded-4 bg-white bg-opacity-75 backdrop-blur border border-opacity-50 d-flex flex-column align-items-center justify-content-center text-primary shadow-lg transition-all" style="width: clamp(6rem, 20vw, 12rem); height: clamp(6rem, 20vw, 12rem);">
                        <i data-lucide="compass" class="animate-spin-slow" style="width: clamp(2rem, 8vw, 5rem); height: clamp(2rem, 8vw, 5rem); animation: spin 12s linear infinite;"></i>
                        <span class="mt-2 mt-sm-3 text-uppercase fw-black opacity-50" style="font-size: clamp(0.5rem, 1.5vw, 0.625rem); letter-spacing: 0.2em;">@Localizer["CompassLost"]</span>
                    </div>
                </div>
            </div>
            
            <!-- Title and Description (Responsive) -->
            <div class="vstack gap-3 position-relative px-3 px-sm-4" style="z-index: 10;">
                <h1 class="fw-black text-uppercase lh-sm" style="font-size: clamp(1.5rem, 5vw, 3rem); letter-spacing: -0.05em;">
                    @Localizer["CoordinateNotFound"]
                </h1>
                <p class="small fw-medium text-muted text-uppercase opacity-75 mx-auto lh-base" style="max-width: clamp(20rem, 50vw, 28rem); letter-spacing: 0.1em;">
                    @Localizer["PageNotFoundDescription"]
                </p>
            </div>
        </div>

        <!-- Action Buttons (Responsive) -->
        <div class="d-flex flex-column flex-sm-row align-items-center justify-content-center gap-3 px-3 px-sm-0">
            <button onclick="history.back()" class="btn btn-outline-secondary w-100 w-sm-auto px-4 px-sm-5 px-md-6 py-3 py-sm-4 rounded-4 fw-black text-uppercase d-inline-flex align-items-center justify-content-center gap-2" style="font-size: 0.625rem; letter-spacing: 0.1em; min-height: 44px;">
                <i data-lucide="arrow-left" style="width: 1rem; height: 1rem;"></i> 
                @Localizer["GoBack"]
            </button>
            <a asp-controller="Feed" asp-action="Index" class="btn btn-primary w-100 w-sm-auto px-4 px-sm-5 px-md-6 py-3 py-sm-4 rounded-4 shadow-lg fw-black text-uppercase d-inline-flex align-items-center justify-content-center gap-2" style="font-size: 0.625rem; letter-spacing: 0.1em; min-height: 44px;">
                @Localizer["GoHome"] <i data-lucide="home" style="width: 1rem; height: 1rem;"></i>
            </a>
        </div>

        <!-- Diagnostic Information (Responsive) -->
        <div class="card bg-opacity-25 backdrop-blur border border-opacity-50 rounded-4 p-3 p-sm-4 p-md-5 mt-4 mt-sm-5 position-relative overflow-hidden mx-3 mx-sm-0">
            <!-- Background Icon -->
            <div class="position-absolute top-0 end-0 m-3 m-sm-4 opacity-10">
                <i data-lucide="microscope" style="width: clamp(3rem, 10vw, 6rem); height: clamp(3rem, 10vw, 6rem);"></i>
            </div>
            
            <!-- Diagnostic Content -->
            <div class="vstack gap-3 gap-sm-4 position-relative" style="z-index: 10;">
                <h4 class="fw-black text-uppercase border-start border-primary border-4 ps-3" style="font-size: clamp(0.625rem, 2vw, 0.75rem); letter-spacing: 0.15em;">
                    @Localizer["DiagnosticTrace"]
                </h4>
                
                <!-- Diagnostic Grid (Responsive) -->
                <div class="row row-cols-1 row-cols-sm-2 g-3 g-sm-4 fw-black text-uppercase opacity-50" style="font-size: clamp(0.5rem, 1.5vw, 0.625rem); letter-spacing: 0.1em;">
                    <div class="col">
                        <div class="vstack gap-1 gap-sm-2">
                            <span class="d-block">@Localizer["NodeState"]: @Localizer["Void"]</span>
                            <span class="d-block">@Localizer["Protocol"]: HTTPS/2</span>
                            <span class="d-block d-sm-none">@Localizer["TraceId"]: @Guid.NewGuid().ToString().Substring(0, 8).ToUpper()</span>
                        </div>
                    </div>
                    <div class="col">
                        <div class="vstack gap-1 gap-sm-2">
                            <span class="d-none d-sm-block">@Localizer["TraceId"]: @Guid.NewGuid().ToString().Substring(0, 12).ToUpper()</span>
                            <span class="d-block">@Localizer["Handshake"]: @Localizer["Failed"]</span>
                            <span class="d-block">@Localizer["Timestamp"]: @DateTime.Now.ToString("HH:mm:ss")</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Help Section (Mobile Optimized) -->
        <div class="text-center vstack gap-3 px-3 px-sm-0">
            <p class="small text-muted opacity-75">
                @Localizer["NeedHelp"]
            </p>
            <div class="d-flex flex-wrap align-items-center justify-content-center gap-2 gap-sm-3 small">
                <a href="/contact" class="text-primary text-decoration-underline">
                    @Localizer["ContactSupport"]
                </a>
                <span class="text-muted opacity-50">•</span>
                <a href="/help" class="text-primary text-decoration-underline">
                    @Localizer["HelpCenter"]
                </a>
                <span class="text-muted opacity-50">•</span>
                <a href="/sitemap" class="text-primary text-decoration-underline">
                    @Localizer["Sitemap"]
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Custom Styles for 404 Page -->
<style>
    /* Enhanced responsive animations */
    @@keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .animate-in.fade-in {
        animation: fade-in 0.8s ease-out;
    }

    @@keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
    
    /* Mobile-specific improvements */
    @@media (max-width: 640px) {
        .glass-card {
            border-radius: 0 !important;
            margin: 0 !important;
        }
        
        /* Improve touch targets */
        button, a {
            min-height: 44px;
            touch-action: manipulation;
        }
    }
    
    /* Tablet optimizations */
    @@media (min-width: 641px) and (max-width: 1024px) {
        .glass-card {
            margin: 1rem;
        }
    }
    
    /* Prevent horizontal scroll */
    body {
        overflow-x: hidden;
    }
    
    /* Enhanced hover effects for desktop */
    @@media (min-width: 1024px) {
        .animate-spin-slow:hover {
            animation-duration: 8s !important;
        }
    }
    
    /* RTL Support */
    [dir="rtl"] .border-start {
        border-left: none !important;
        border-right: var(--bs-border-width) solid var(--bs-primary) !important;
        padding-left: 0 !important;
        padding-right: 0.75rem !important;
    }
    
    /* Dark mode optimizations */
    .dark .bg-opacity-25 {
        background-color: hsl(var(--card) / 0.4) !important;
    }
    
    .dark .shadow-lg {
        box-shadow: 0 10px 15px -3px hsl(var(--primary) / 0.3) !important;
    }
</style>

@section Scripts {
    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        
        // Add smooth scroll behavior
        document.documentElement.style.scrollBehavior = 'smooth';
        
        // Enhanced mobile interactions
        if ('ontouchstart' in window) {
            // Add touch feedback for buttons
            document.querySelectorAll('button, a').forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });
                
                element.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
        }
        
        // Accessibility improvements
        document.addEventListener('keydown', function(e) {
            // Allow Enter key to trigger back button
            if (e.key === 'Enter' && e.target.tagName === 'BUTTON') {
                e.target.click();
            }
            
            // Allow Escape key to go back
            if (e.key === 'Escape') {
                history.back();
            }
        });
        
        // Performance optimization - reduce animations on low-end devices
        if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {
            document.documentElement.style.setProperty('--animation-duration', '0.3s');
        }
    </script>
}
