@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    var activeAction = ViewContext.RouteData.Values["action"]?.ToString();
    var controller = ViewContext.RouteData.Values["controller"]?.ToString();
    var userId = ViewBag.UserId?.ToString() ?? "";
    var isOwner = ViewBag.IsOwner == true;
}

<!-- Profile Navigation: Mirroring Feed Page "Sorting Pulse" aesthetic with responsive scrolling -->
<div class="p-6 border-b border-border/30">
    <div class="overflow-x-auto scrollbar-hide profile-nav-container">
        <div class="flex justify-center min-w-max">
            <div class="inline-flex items-center gap-2 sm:gap-4 bg-muted/30 backdrop-blur-md p-1.5 rounded-[1.5rem] border border-border/50 shadow-xl">
                <a class="profile-nav-tab inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-8 py-2.5 rounded-[1.25rem] text-[10px] font-black uppercase tracking-[0.15em] transition-all whitespace-nowrap @(activeAction == "ViewProfile" && controller == "Profile" ? "bg-background text-foreground shadow-lg border border-border" : "text-muted-foreground/60 hover:text-foreground hover:bg-muted/50")" href="/profile/@userId">
                    <i data-lucide="layout-dashboard" class="w-3.5 h-3.5 flex-shrink-0"></i> 
                    <span class="hidden xs:inline">@Localizer["Overview"]</span>
                </a>
                <a class="profile-nav-tab inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-8 py-2.5 rounded-[1.25rem] text-[10px] font-black uppercase tracking-[0.15em] transition-all whitespace-nowrap @(controller == "Gallery" ? "bg-background text-foreground shadow-lg border border-border" : "text-muted-foreground/60 hover:text-foreground hover:bg-muted/50")" href="/profile/@userId/gallery">
                    <i data-lucide="image" class="w-3.5 h-3.5 flex-shrink-0"></i> 
                    <span class="hidden xs:inline">@Localizer["Gallery"]</span>
                </a>
                <a class="profile-nav-tab inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-8 py-2.5 rounded-[1.25rem] text-[10px] font-black uppercase tracking-[0.15em] transition-all whitespace-nowrap @(activeAction == "Interests" ? "bg-background text-foreground shadow-lg border border-border" : "text-muted-foreground/60 hover:text-foreground hover:bg-muted/50")" href="/profile/@userId/interests">
                    <i data-lucide="sparkles" class="w-3.5 h-3.5 flex-shrink-0"></i> 
                    <span class="hidden xs:inline">@Localizer["Interests"]</span>
                </a>
                <a class="profile-nav-tab inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-8 py-2.5 rounded-[1.25rem] text-[10px] font-black uppercase tracking-[0.15em] transition-all whitespace-nowrap @(activeAction == "Badges" ? "bg-background text-foreground shadow-lg border border-border" : "text-muted-foreground/60 hover:text-foreground hover:bg-muted/50")" href="/profile/@userId/badges">
                    <i data-lucide="award" class="w-3.5 h-3.5 flex-shrink-0"></i> 
                    <span class="hidden xs:inline">@Localizer["Badges"]</span>
                </a>
                @if (isOwner)
                {
                    <a class="profile-nav-tab inline-flex items-center gap-2 sm:gap-3 px-3 sm:px-8 py-2.5 rounded-[1.25rem] text-[10px] font-black uppercase tracking-[0.15em] transition-all whitespace-nowrap @(activeAction == "Index" && controller == "ProfileSettings" ? "bg-background text-foreground shadow-lg border border-border" : "text-muted-foreground/60 hover:text-foreground hover:bg-muted/50")" href="/profile/settings">
                        <i data-lucide="settings" class="w-3.5 h-3.5 flex-shrink-0"></i> 
                        <span class="hidden xs:inline">@Localizer["Settings"]</span>
                    </a>
                }
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Scroll active tab into view on page load
    const activeTab = document.querySelector('.profile-nav-tab.bg-background');
    if (activeTab) {
        activeTab.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'nearest', 
            inline: 'center' 
        });
    }
    
    // Add smooth scrolling behavior for navigation container
    const navContainer = document.querySelector('.profile-nav-container');
    if (navContainer) {
        // Ensure smooth scrolling
        navContainer.style.scrollBehavior = 'smooth';
        
        // Optional: Add scroll indicators based on scroll position
        function updateScrollIndicators() {
            const container = navContainer;
            const isScrollable = container.scrollWidth > container.clientWidth;
            const isAtStart = container.scrollLeft <= 5;
            const isAtEnd = container.scrollLeft >= container.scrollWidth - container.clientWidth - 5;
            
            // You can add visual indicators here if needed
            // For now, we'll just ensure smooth scrolling works
        }
        
        navContainer.addEventListener('scroll', updateScrollIndicators);
        updateScrollIndicators(); // Initial check
    }
});
</script>