@model CommunityCar.Application.Features.Dashboard.Management.developer.ErrorReporting.ViewModels.ErrorViewModel
@{
    ViewData["Title"] = "System Anomaly Detected";
    Layout = "_DashboardLayout";
}

<div class="container py-5 animate-in fade-in" style="max-width: 1000px;">
    <div class="row align-items-center g-5 mb-5">
        <div class="col-md-auto">
            <div class="position-relative">
                <div class="position-absolute translate-middle-x bg-danger bg-opacity-10 shadow-lg rounded-5 blur-xl" style="width: 150px; height: 150px; left: 50%; top: 50%; z-index: -1;"></div>
                <div class="card-premium border-danger border-opacity-10 d-flex align-items-center justify-content-center text-danger shadow-lg rotate-1 transition-all hover-rotate-0" style="width: 120px; height: 120px; border-radius: 30px;">
                    <i class="fas fa-unlink fa-3x"></i>
                </div>
            </div>
        </div>
        
        <div class="col-md text-center text-md-start">
            <div class="d-inline-flex align-items-center gap-2 px-3 py-2 bg-danger bg-opacity-10 border border-danger border-opacity-20 rounded-pill text-danger xx-small fw-black text-uppercase tracking-widest mb-3">
                <span class="pulse-red" style="width: 8px; height: 8px; border-radius: 50%; background-color: var(--bs-danger);"></span>
                Critical Kernel Exception
            </div>
            <h1 class="fw-black text-gradient display-4 tracking-tighter mb-2">Kernel Anomaly <br class="d-none d-md-block"/> Detected</h1>
            <p class="text-muted small fw-bold text-uppercase tracking-widest opacity-60">The application state has been compromised by an unhandled logic fork.</p>
        </div>
    </div>

    <div class="row g-4">
        <!-- Telemetry Details -->
        <div class="col-lg-6">
            <div class="card bg-dark border-0 rounded-5 p-4 h-100 shadow-xl overflow-hidden position-relative">
                <div class="d-flex justify-content-between align-items-center mb-4 border-bottom border-white border-opacity-10 pb-3">
                    <span class="xx-small fw-black text-uppercase tracking-widest text-muted">Telemetry Relay</span>
                    <div class="d-flex gap-2">
                        <div class="rounded-circle bg-danger bg-opacity-50" style="width: 10px; height: 10px;"></div>
                        <div class="rounded-circle bg-warning bg-opacity-50" style="width: 10px; height: 10px;"></div>
                        <div class="rounded-circle bg-success bg-opacity-50" style="width: 10px; height: 10px;"></div>
                    </div>
                </div>
                
                <div class="vstack gap-4 font-monospace">
                    @if (Model.ShowRequestId)
                    {
                        <div>
                            <span class="d-block xx-small fw-black text-uppercase tracking-widest text-danger text-opacity-75 mb-2">Request Identification</span>
                            <code class="d-block small text-white text-opacity-90 text-break bg-white bg-opacity-5 p-3 rounded-4">@Model.RequestId</code>
                        </div>
                    }
                    <div>
                        <span class="d-block xx-small fw-black text-uppercase tracking-widest text-danger text-opacity-75 mb-2">Context Node</span>
                        <code class="d-block small text-white text-opacity-90 bg-white bg-opacity-5 p-3 rounded-4">KRNL-ANOMALY-FAILOVER-V1</code>
                    </div>
                </div>

                <div class="mt-auto pt-4 border-top border-white border-opacity-5">
                    <p class="xx-small text-muted text-opacity-50 fw-bold text-uppercase tracking-widest mb-0">Incident archived in central registry for forensic evaluation.</p>
                </div>
            </div>
        </div>

        <!-- Directives -->
        <div class="col-lg-6">
            <div class="card card-premium border-0 rounded-5 p-4 p-md-5 h-100 d-flex flex-column justify-content-center">
                <h3 class="xx-small fw-black text-uppercase tracking-widest text-dark opacity-50 mb-4 ps-2">Sequence Recovery:</h3>
                
                <div class="vstack gap-3 mb-4">
                    <a href="javascript:location.reload()" class="d-flex align-items-center justify-content-between p-4 bg-light border border-light rounded-4 text-decoration-none group hover-border-primary transition-all">
                        <span class="fw-black text-uppercase tracking-widest small text-dark">Retry Sequence</span>
                        <i class="fas fa-sync-alt text-muted group-hover-text-primary"></i>
                    </a>
                    <a asp-controller="Feed" asp-action="Index" class="d-flex align-items-center justify-content-between p-4 bg-light border border-light rounded-4 text-decoration-none group hover-border-primary transition-all">
                        <span class="fw-black text-uppercase tracking-widest small text-dark">Foundation Hub</span>
                        <i class="fas fa-home text-muted group-hover-text-primary"></i>
                    </a>
                </div>
                
                <p class="xx-small font-medium text-muted fw-bold text-uppercase tracking-widest opacity-60 mb-0 ps-2 leading-relaxed">If state persistency fails, contact regional engineers with the Telemetry ID.</p>
            </div>
        </div>
    </div>
</div>

<style>
    .xx-small { font-size: 0.6rem; }
    .blur-xl { filter: blur(40px); }
    .rotate-1 { transform: rotate(1deg); }
    .hover-rotate-0:hover { transform: rotate(0deg); }
    .pulse-red { animation: pulse-red 2s infinite; }
    @@keyframes pulse-red { 0% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(1.2); } 100% { opacity: 1; transform: scale(1); } }
    .group:hover .group-hover-text-primary { color: var(--primary-red) !important; }
    .hover-border-primary:hover { border-color: var(--primary-red) !important; box-shadow: 0 5px 15px -5px rgba(251, 44, 54, 0.2); }
    .leading-relaxed { line-height: 1.6; }
</style>
