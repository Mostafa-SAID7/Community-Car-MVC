@using System.Globalization
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<SharedResource> SharedLocalizer
<!DOCTYPE html>
<html lang="@CultureInfo.CurrentUICulture.TwoLetterISOLanguageName" dir="@(CultureInfo.CurrentUICulture.TextInfo.IsRightToLeft ? "rtl" : "ltr")" class="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - @SharedLocalizer["AppName"]</title>

    <!-- Theme initialization script (must be before any content) -->
    <script>
        (function() {
            const theme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.classList.remove('light', 'dark');
            document.documentElement.classList.add(theme);
        })();
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@100..900&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="~/images/logo/logo.png">
    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="~/css/app.min.css" asp-append-version="true" />

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    @* Auth styles consolidated in app.css *@
    @await RenderSectionAsync("Styles", required: false)
</head>

<body class="font-sans antialiased auth-gradient-bg">
    <partial name="_Header" />
    
    <!-- Main container - Enhanced responsive design -->
    <div class="flex items-start justify-center w-full auth-container px-0 sm:px-4 pt-16 sm:pt-20 md:pt-24 pb-6 sm:pb-10 min-h-screen">
        <main class="w-full @(ViewData["FullWidth"] != null ? "max-w-none" : "max-w-md") auth-view-transition">
            <div class="@(ViewData["FullWidth"] != null ? "bg-transparent border-0 shadow-none" : "glass-card") rounded-b-3xl sm:rounded-3xl shadow-2xl overflow-hidden shadow-primary/10 border-white/20">
                @RenderBody()
            </div>
        </main>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/notifications.js" asp-append-version="true"></script>
    <script src="~/js/toaster.js" asp-append-version="true"></script>
    <script src="~/js/validation.js" asp-append-version="true"></script>
    <script>
        lucide.createIcons();
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>