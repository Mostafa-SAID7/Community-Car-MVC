@model CommunityCar.Application.Features.Dashboard.Overview.ViewModels.OverviewVM
@{
    ViewData["Title"] = Localizer["DashboardOverview"];
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
    ViewData["UseModernTheme"] = true;
}
@inject IViewLocalizer Localizer

<div class="animate-slide-up">
    <!-- Top Header Section -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-4">
        <div>
            <h1 class="page-title mb-2">Managing <i data-lucide="sun" class="text-muted opacity-40 mx-1"></i> Your Team <br class="d-none d-md-block" /> and <i data-lucide="zap" class="text-muted opacity-40 mx-1"></i> Workflows</h1>
        </div>
        <div class="d-flex align-items-center gap-3">
            <div class="w-10 h-10 rounded-circle bg-white d-flex align-items-center justify-content-center shadow-sm cursor-pointer">
                <i data-lucide="settings" class="w-5 h-5 text-muted"></i>
            </div>
            <button class="btn-modern-primary flex-grow-1">
                <i data-lucide="plus" class="w-5 h-5"></i>
                <span>Create a New Scenario</span>
            </button>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="modern-tabs mb-4">
        <div class="modern-tab active">Organization</div>
        <div class="modern-tab">Teams</div>
        <div class="modern-tab">Users</div>
        <div class="modern-tab">Subscription</div>
        <div class="modern-tab">Payment</div>
        <div class="modern-tab">Installed Apps</div>
        <div class="modern-tab">Variables</div>
        <div class="modern-tab">Scenario Properties</div>
    </div>

    <div class="row g-4">
        <!-- Main Content (Left) -->
        <div class="col-12 col-xl-9">
            <div class="row g-4 mb-4">
                <!-- Operations Card -->
                <div class="col-12 col-md-4">
                    <div class="card-modern">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div class="d-flex align-items-center gap-2">
                                <div class="w-8 h-8 rounded-circle border d-flex align-items-center justify-content-center">
                                    <i data-lucide="settings" class="w-4 h-4 text-muted"></i>
                                </div>
                                <span class="fw-bold text-muted small">Operations</span>
                            </div>
                            <i data-lucide="more-vertical" class="w-5 h-5 text-muted"></i>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex align-items-baseline gap-2">
                                <span class="display-5 fw-black">780</span>
                                <span class="text-muted font-monospace">/ 1000</span>
                            </div>
                            <div class="badge bg-warning-subtle text-warning rounded-pill px-3 py-1 small fw-bold mt-2">
                                82% <i data-lucide="refresh-cw" class="w-3 h-3 ms-1"></i>
                            </div>
                        </div>
                        <div class="d-flex gap-1">
                            @for(int i=0; i<8; i++) {
                                <div class="flex-grow-1 rounded-pill bg-dark" style="height: 32px; @(i > 4 ? "opacity: 0.1;" : "")"></div>
                            }
                        </div>
                    </div>
                </div>

                <!-- Data Transfer Card -->
                <div class="col-12 col-md-4">
                    <div class="card-modern card-modern-lime">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div class="d-flex align-items-center gap-2">
                                <div class="w-8 h-8 rounded-circle border border-dark border-opacity-10 d-flex align-items-center justify-content-center">
                                    <i data-lucide="shuffle" class="w-4 h-4 text-dark"></i>
                                </div>
                                <span class="fw-bold text-dark small">Data Transfer</span>
                            </div>
                            <i data-lucide="more-vertical" class="w-5 h-5 text-dark opacity-50"></i>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex align-items-baseline gap-2">
                                <span class="display-5 fw-black text-dark">163</span>
                                <span class="text-dark opacity-40 font-monospace">/ 512.0 MB</span>
                            </div>
                            <div class="badge bg-white bg-opacity-50 text-dark rounded-pill px-3 py-1 small fw-bold mt-2">
                                68% <i data-lucide="refresh-cw" class="w-3 h-3 ms-1 opacity-50"></i>
                            </div>
                        </div>
                        <div class="d-flex gap-1">
                            @for(int i=0; i<8; i++) {
                                <div class="flex-grow-1 rounded-pill bg-dark" style="height: 32px; @(i > 2 ? "opacity: 0.1;" : "")"></div>
                            }
                        </div>
                    </div>
                </div>

                <!-- Promo Card -->
                <div class="col-12 col-md-4">
                    <div class="card-modern card-modern-dark p-0 overflow-hidden position-relative">
                        <img src="https://images.unsplash.com/photo-1614850523296-d8c1af93d400?auto=format&fit=crop&q=80&w=400" class="position-absolute w-100 h-100 object-fit-cover opacity-50" />
                        <div class="position-relative p-4 h-100 d-flex flex-column justify-content-between bg-gradient-dark">
                            <div>
                                <h3 class="fw-black h2 mb-1">Take Your <br /> Automation <br /> to the Next <br /> Level</h3>
                            </div>
                            <button class="btn btn-white rounded-pill py-3 fw-black w-100 mt-4 d-flex align-items-center justify-content-center gap-2">
                                Upgrade <i data-lucide="play-circle" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics Chart -->
            <div class="card-modern">
                <div class="d-flex justify-content-between align-items-center mb-5">
                    <div class="d-flex align-items-center gap-4">
                        <div class="d-flex align-items-center gap-2">
                            <i data-lucide="bar-chart-2" class="w-5 h-5 text-muted"></i>
                            <span class="fw-bold">Statistics</span>
                        </div>
                        <div class="d-flex align-items-center gap-3 ms-4">
                            <div class="d-flex align-items-center gap-2">
                                <div class="w-2 h-2 rounded-circle bg-dark"></div>
                                <span class="xx-small fw-bold text-muted text-uppercase tracking-wider">Operations</span>
                            </div>
                            <div class="d-flex align-items-center gap-2">
                                <div class="w-2 h-2 rounded-circle bg-lime" style="background-color: var(--modern-lime)"></div>
                                <span class="xx-small fw-bold text-muted text-uppercase tracking-wider">Data transfer</span>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown">
                        <button class="btn-modern-outline dropdown-toggle" data-bs-toggle="dropdown">2025</button>
                    </div>
                </div>
                <div style="height: 350px;">
                    <canvas id="modernStatisticsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Sidebar (Right) -->
        <div class="col-12 col-xl-3">
            <div class="d-flex flex-column gap-3">
                <div class="row g-3">
                    <div class="col-6">
                        <div class="info-tile text-center">
                            <i data-lucide="message-square" class="w-6 h-6 mx-auto mb-2"></i>
                            <span class="fw-bold small">Community</span>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="info-tile text-center">
                            <i data-lucide="graduation-cap" class="w-6 h-6 mx-auto mb-2"></i>
                            <span class="fw-bold small">Academy</span>
                        </div>
                    </div>
                </div>

                <a href="#" class="info-tile">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <i data-lucide="help-circle" class="w-6 h-6 mb-2"></i>
                            <h6 class="fw-bold mb-1">Help Center</h6>
                            <p class="xx-small text-muted mb-0">Explore our detailed documentation...</p>
                        </div>
                        <i data-lucide="arrow-up-right" class="w-4 h-4 text-muted opacity-40"></i>
                    </div>
                </a>

                <a href="#" class="info-tile">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <i data-lucide="users" class="w-6 h-6 mb-2"></i>
                            <h6 class="fw-bold mb-1">Partner Directory</h6>
                            <p class="xx-small text-muted mb-0">Find the perfect partner to support...</p>
                        </div>
                        <i data-lucide="arrow-up-right" class="w-4 h-4 text-muted opacity-40"></i>
                    </div>
                </a>

                <a href="#" class="info-tile">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <i data-lucide="layout" class="w-6 h-6 mb-2"></i>
                            <h6 class="fw-bold mb-1">Blog</h6>
                            <p class="xx-small text-muted mb-0">Access popular guides & stories ab...</p>
                        </div>
                        <i data-lucide="arrow-up-right" class="w-4 h-4 text-muted opacity-40"></i>
                    </div>
                </a>

                <a href="#" class="info-tile">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <i data-lucide="bar-chart" class="w-6 h-6 mb-2"></i>
                            <h6 class="fw-bold mb-1">Use Cases</h6>
                            <p class="xx-small text-muted mb-0">Get inspired by all the ways you ca...</p>
                        </div>
                        <i data-lucide="arrow-up-right" class="w-4 h-4 text-muted opacity-40"></i>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('modernStatisticsChart').getContext('2d');
            
            // Custom plugin to draw rounded bar tops (simplified for this design)
            const statsData = {
                labels: ['27 Jun', '28 Jun', '29 Jun', '30 Jun', '1 Jul', '2 Jul', '3 Jul', '4 Jul'],
                datasets: [
                    {
                        label: 'Operations',
                        data: [0.8, 0.5, 0.7, 0.3, 0.9, 0.1, 0.6, 0.5],
                        backgroundColor: '#0a0a0a',
                        borderRadius: 100,
                        borderSkipped: false,
                        barThickness: 32,
                    },
                    {
                        label: 'Data Transfer',
                        data: [0.4, 0.3, 0.2, 0.8, 0.4, 0.7, 0.4, 0.3],
                        backgroundColor: '#d3f54b',
                        borderRadius: 100,
                        borderSkipped: false,
                        barThickness: 32,
                    }
                ]
            };

            const config = {
                type: 'bar',
                data: statsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            enabled: true,
                            backgroundColor: '#0a0a0a',
                            padding: 12,
                            borderRadius: 12,
                            callbacks: {
                                label: function(context) {
                                    return (context.raw * 100).toFixed(0) + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            stacked: false,
                            grid: { display: false },
                            ticks: {
                                color: '#999',
                                font: { size: 11, weight: '600' }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: 1.0,
                            grid: {
                                color: 'rgba(0,0,0,0.03)',
                                drawBorder: false
                            },
                            ticks: {
                                stepSize: 0.1,
                                color: '#999',
                                font: { size: 10, weight: '600' }
                            }
                        }
                    }
                }
            };

            new Chart(ctx, config);
        });
    </script>
}

<style>
    .xx-small { font-size: 0.65rem; }
    .bg-gradient-dark {
        background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.8));
    }
    .btn-white {
        background: white;
        color: black;
        border: none;
        transition: all 0.2s;
    }
    .btn-white:hover {
        background: #f0f0f0;
        transform: translateY(-2px);
    }
</style>
