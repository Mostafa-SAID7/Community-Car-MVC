@inject IViewLocalizer Localizer
@model List<CommunityCar.Domain.Entities.Localization.LocalizationCulture>
@{
    ViewData["Title"] = Localizer["LocalizationHubTitle"];
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<div class="space-y-8 animate-in fade-in duration-700 font-sans">
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div>
            <h1 class="text-3xl font-black text-foreground tracking-tight">@Localizer["LocalizationHub"]</h1>
            <p class="text-sm text-muted-foreground font-medium opacity-70 mt-1">@Localizer["LocalizationHubDesc"]</p>
        </div>
        <div class="flex flex-wrap items-center gap-3">
            <form asp-action="ImportFromFiles" method="post" class="inline">
                @Html.AntiForgeryToken()
                <button type="submit" class="px-6 py-2.5 bg-background border border-border hover:border-primary hover:text-primary rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-black/5 active:scale-95">@Localizer["SyncFiles"]</button>
            </form>
            <a href="@Url.Action("Resources", "Localization")" class="px-6 py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all active:scale-95">@Localizer["Dictionary"]</a>
            <a href="@Url.Action("AddCulture", "Localization")" class="px-6 py-2.5 bg-primary text-primary-foreground hover:bg-primary/90 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-primary/20 active:scale-95">@Localizer["AddCulture"]</a>
        </div>
    </div>

    <div id="localization-skeleton" class="hidden space-y-4">
        <skeleton type="Line" />
        <skeleton type="Line" />
        <skeleton type="Line" />
    </div>

    <div id="localization-content" class="bg-card/40 backdrop-blur-md border border-border rounded-2xl shadow-xl overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-muted/30 border-b border-border/50">
                        <th class="px-8 py-5 text-[10px] font-black text-muted-foreground uppercase tracking-widest">@Localizer["CultureCode"]</th>
                        <th class="px-8 py-5 text-[10px] font-black text-muted-foreground uppercase tracking-widest">@Localizer["IdentityName"]</th>
                        <th class="px-8 py-5 text-[10px] font-black text-muted-foreground uppercase tracking-widest text-center">@Localizer["Protocol"]</th>
                        <th class="px-8 py-5 text-[10px] font-black text-muted-foreground uppercase tracking-widest text-center">@Localizer["Priority"]</th>
                        <th class="px-8 py-5 text-[10px] font-black text-muted-foreground uppercase tracking-widest text-center">@Localizer["Health"]</th>
                        <th class="px-8 py-5 text-[10px] font-black text-muted-foreground uppercase tracking-widest text-right">@Localizer["Actions"]</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-border/20">
                    @foreach (var culture in Model)
                    {
                        <tr class="group hover:bg-primary/5 transition-colors">
                            <td class="px-8 py-5">
                                <code class="px-3 py-1 bg-background border border-border rounded-lg text-primary font-black text-xs shadow-inner">@culture.Name</code>
                            </td>
                            <td class="px-8 py-5 text-sm font-black text-foreground">@culture.DisplayName</td>
                            <td class="px-8 py-5 text-center">
                                <span class="px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border @(culture.IsRTL ? "bg-amber-500/10 text-amber-600 border-amber-500/20" : "bg-blue-500/10 text-blue-600 border-blue-500/20")">
                                    @(culture.IsRTL ? Localizer["RTLBase"] : Localizer["LTRBase"])
                                </span>
                            </td>
                            <td class="px-8 py-5 text-center">
                                @if (culture.IsDefault)
                                {
                                    <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-lg bg-green-500/10 text-green-600 border border-green-500/20 text-[9px] font-black uppercase tracking-widest">
                                        <i data-lucide="star" class="w-3 h-3 fill-current"></i> @Localizer["Default"]
                                    </span>
                                }
                                else
                                {
                                    <span class="text-[10px] font-black uppercase text-muted-foreground opacity-30">â€”</span>
                                }
                            </td>
                            <td class="px-8 py-5 text-center">
                                <span class="inline-flex items-center gap-2 px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest @(culture.IsActive ? "bg-green-500/10 text-green-600" : "bg-red-500/10 text-red-600")">
                                    <span class="w-1.5 h-1.5 rounded-full @(culture.IsActive ? "bg-green-500 animate-pulse" : "bg-red-500")"></span>
                                    @(culture.IsActive ? Localizer["Operational"] : Localizer["Offline"])
                                </span>
                            </td>
                            <td class="px-8 py-5 text-right">
                                <div class="flex items-center justify-end gap-2">
                                    <a href="@Url.Action("EditCulture", "Localization", new { id = culture.Id })" class="w-8 h-8 flex items-center justify-center rounded-lg bg-muted/50 hover:bg-primary/10 hover:text-primary transition-all border border-transparent hover:border-primary/20">
                                        <i data-lucide="edit-3" class="w-3.5 h-3.5"></i>
                                    </a>
                                    <form asp-action="DeleteCulture" asp-route-id="@culture.Id" method="post" class="inline delete-culture-form">
                                        @Html.AntiForgeryToken()
                                        <button type="button" 
                                                data-action="confirm-delete-culture"
                                                class="w-8 h-8 flex items-center justify-center rounded-lg bg-muted/50 hover:bg-red-500/10 hover:text-red-600 transition-all border border-transparent hover:border-red-500/20">
                                            <i data-lucide="trash-2" class="w-3.5 h-3.5"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
@section Scripts {
    <script src="~/js/dashboard-localization.js" asp-append-version="true"></script>
}
    </div>
</div>
