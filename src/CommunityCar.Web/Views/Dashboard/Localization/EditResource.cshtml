@inject IViewLocalizer Localizer
@model CommunityCar.Domain.Entities.Localization.LocalizationResource
@{
    var isEdit = Model.Id != Guid.Empty;
    ViewData["Title"] = isEdit ? Localizer["EditMapping"] : Localizer["InitializeMapping"];
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
    ViewData["UseModernTheme"] = true;
    var cultures = ViewBag.Cultures as List<CommunityCar.Domain.Entities.Localization.LocalizationCulture>;
}

<div class="animate-slide-up mx-auto" style="max-width: 900px;">
    <!-- Top Header Section -->
    <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
            <h1 class="page-title mb-2">@(isEdit ? Localizer["RefineProtocol"] : Localizer["NewTranslationNode"])</h1>
            <p class="text-muted fw-medium">@Localizer["ResourceOrchestrationDesc"]</p>
        </div>
        <a href="@Url.Action("Resources")" class="btn-modern-outline">@Localizer["EscapeToRegistry"]</a>
    </div>

    <!-- Form Section -->
    <div class="card-modern">
        <form asp-action="SaveResource" method="post">
            <input type="hidden" asp-for="Id" />
            
            <div class="row g-4 mb-4">
                <div class="col-12 col-md-6">
                    <label asp-for="Key" class="modern-label">@Localizer["SystemIdentifierKey"]</label>
                    <div class="position-relative">
                        <i data-lucide="key" class="position-absolute translate-middle-y text-muted" style="left: 1rem; top: 50%; width: 1rem; height: 1rem;"></i>
                        <input asp-for="Key" class="modern-input" style="padding-left: 2.75rem;" placeholder="e.g. NAV_CHASSIS_CONTROL" required />
                    </div>
                </div>

                <div class="col-12 col-md-6">
                    <label asp-for="Culture" class="modern-label">@Localizer["LocaleTarget"]</label>
                    <select asp-for="Culture" class="modern-select" required>
                        <option value="">@Localizer["SelectProtocol"]</option>
                        @foreach (var c in cultures ?? new())
                        {
                            <option value="@c.Name">@c.DisplayName (@c.Name)</option>
                        }
                    </select>
                </div>
            </div>

            <div class="mb-4">
                <label asp-for="ResourceGroup" class="modern-label">@Localizer["DomainNamespace"]</label>
                <div class="position-relative">
                    <i data-lucide="layers" class="position-absolute translate-middle-y text-muted" style="left: 1rem; top: 50%; width: 1rem; height: 1rem;"></i>
                    <input asp-for="ResourceGroup" class="modern-input" style="padding-left: 2.75rem;" placeholder="e.g. Components_Dashboard_Telemetry" list="group-list" />
                </div>
                <datalist id="group-list">
                    @foreach (var g in (ViewBag.ResourceGroups as List<string>) ?? new())
                    {
                        <option value="@g"></option>
                    }
                </datalist>
            </div>

            <div class="mb-5">
                <label asp-for="Value" class="modern-label">@Localizer["LocalizedContentPayload"]</label>
                <textarea asp-for="Value" class="modern-textarea" required placeholder="@Localizer["LocalizedContentPlaceholder"]"></textarea>
            </div>

            <div class="pt-4 border-top">
                <button type="submit" class="btn-modern-primary w-100 justify-content-center py-3">
                    @Localizer["CommitToRegistry"]
                </button>
            </div>
        </form>
    </div>
</div>
