@inject IViewLocalizer Localizer
@{
    Layout = "_DashboardLayout";
    ViewData["Title"] = Localizer["SystemMaintenanceControl"];
    bool isEnabled = ViewBag.IsMaintenanceEnabled ?? false;
    string message = ViewBag.MaintenanceMessage ?? "";
}

<!-- Maintenance Control Panel -->
<div class="min-h-screen bg-black text-white p-6 lg:p-12 font-mono">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="flex items-center justify-between mb-12 border-b border-white/10 pb-8">
            <div>
                <h1 class="text-4xl font-black tracking-tighter uppercase mb-2 italic">
                    <span class="text-red-600">@Localizer["Protocol"]</span> 503
                </h1>
                <p class="text-zinc-500 text-sm tracking-widest uppercase">@Localizer["SystemWideMaintenanceLockdown"]</p>
            </div>
            <div class="flex items-center gap-4">
                <div class="h-2 w-2 rounded-full @(isEnabled ? "bg-red-600 animate-pulse" : "bg-green-600")"></div>
                <span class="text-xs font-bold uppercase tracking-widest">
                    @Localizer["Status"]: @(isEnabled ? Localizer["ActiveLockdown"] : Localizer["GridOperational"])
                </span>
            </div>
        </div>

        <form asp-action="Toggle" method="post" class="space-y-12">
            @Html.AntiForgeryToken()

            <!-- Warning Card -->
            <div class="relative group">
                <div class="absolute -inset-0.5 bg-gradient-to-r @(isEnabled ? "from-green-600 to-emerald-600" : "from-red-600 to-orange-600") rounded-xl blur opacity-20 group-hover:opacity-40 transition duration-1000"></div>
                <div class="relative bg-zinc-900/50 backdrop-blur-xl border border-white/10 rounded-xl p-8">
                    <div class="flex items-start gap-6">
                        <div class="p-4 rounded-lg @(isEnabled ? "bg-green-600/10 text-green-600" : "bg-red-600/10 text-red-600")">
                            <i data-lucide="@(isEnabled ? "power" : "zap-off")" class="w-8 h-8"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-2 uppercase tracking-tight">
                                @(isEnabled ? Localizer["DeactivateLockdown"] : Localizer["InitiateSystemShutdown"])
                            </h3>
                            <p class="text-zinc-400 text-sm leading-relaxed mb-6">
                                @(isEnabled 
                                    ? Localizer["DeactivateLockdownDesc"] 
                                    : Localizer["InitiateSystemShutdownDesc"])
                            </p>
                            
                            <input type="hidden" name="isEnabled" value="@((!isEnabled).ToString().ToLower())" />
                            
                            <button type="submit" 
                                    class="relative px-8 py-4 bg-white text-black font-black uppercase tracking-widest text-sm hover:scale-105 transition-transform group overflow-hidden">
                                <span class="relative z-10 flex items-center gap-2">
                                    @(isEnabled ? Localizer["RestoreGridAccess"] : Localizer["ExecuteSystemKillSwitch"])
                                    <i data-lucide="chevron-right" class="w-4 h-4"></i>
                                </span>
                                <div class="absolute inset-0 bg-zinc-200 translate-x-full group-hover:translate-x-0 transition-transform duration-300"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuration Section -->
            <div class="space-y-6">
                <div class="flex items-center gap-4 mb-4">
                    <span class="h-[1px] flex-1 bg-white/10"></span>
                    <h2 class="text-xs font-bold uppercase tracking-[0.3em] text-zinc-500">@Localizer["TransmissionTelemetry"]</h2>
                    <span class="h-[1px] flex-1 bg-white/10"></span>
                </div>

                <div class="grid grid-cols-1 gap-8">
                    <!-- Message Input -->
                    <div class="space-y-4">
                        <label class="block text-xs font-bold uppercase tracking-widest text-zinc-400">@Localizer["PublicBroadcastMessage"]</label>
                        <div class="relative">
                            <textarea name="message" rows="4" 
                                class="w-full bg-zinc-900 border border-white/10 rounded-lg p-6 text-zinc-300 focus:outline-none focus:border-red-600 transition-colors placeholder:text-zinc-700 resize-none"
                                placeholder="@Localizer["MaintenanceMessagePlaceholder"]">@message</textarea>
                            <div class="absolute bottom-4 right-4 text-[10px] text-zinc-600 uppercase tracking-widest">
                                @Localizer["Protocol"]: @Localizer["Standard"]
                            </div>
                        </div>
                    </div>

                    <!-- Safety Check -->
                    <div class="flex items-center gap-4 p-4 border border-zinc-800 rounded-lg bg-zinc-900/30">
                        <div class="p-2 bg-zinc-800 rounded">
                            <i data-lucide="shield-check" class="w-4 h-4 text-zinc-500"></i>
                        </div>
                        <p class="text-[10px] text-zinc-500 uppercase tracking-widest leading-relaxed">
                            @Localizer["VerifiedAdminDesc"]
                        </p>
                    </div>
                </div>
            </div>
        </form>

        <!-- Footer Stats -->
        <div class="mt-20 grid grid-cols-3 gap-8">
            <div class="border-t border-white/5 pt-4">
                <div class="text-[10px] text-zinc-600 uppercase tracking-widest mb-1">@Localizer["Node"] 01</div>
                <div class="text-xs font-bold text-zinc-400">@Localizer["Link"]: @Localizer["Secure"]</div>
            </div>
            <div class="border-t border-white/5 pt-4">
                <div class="text-[10px] text-zinc-600 uppercase tracking-widest mb-1">@Localizer["Node"] 02</div>
                <div class="text-xs font-bold text-zinc-400">@Localizer["Link"]: @Localizer["Standby"]</div>
            </div>
            <div class="border-t border-white/5 pt-4">
                <div class="text-[10px] text-zinc-600 uppercase tracking-widest mb-1">@Localizer["Node"] 03</div>
                <div class="text-xs font-bold text-zinc-400">@Localizer["Link"]: @Localizer["Active"]</div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Lucide icons are initialized globally in the dashboard, but we can re-init if needed
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    </script>
}