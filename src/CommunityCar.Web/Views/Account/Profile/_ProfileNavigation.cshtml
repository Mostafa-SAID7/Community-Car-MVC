@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    var activeAction = ViewContext.RouteData.Values["action"]?.ToString();
    var controller = ViewContext.RouteData.Values["controller"]?.ToString();
    var userId = ViewBag.UserId?.ToString() ?? "";
    var isOwner = ViewBag.IsOwner == true;
    
    var isSettingsActive = controller == "ProfileSettings" && activeAction == "Index";
    var isGalleryActive = controller == "Gallery";
    var isInterestsActive = activeAction == "Interests";
    var isBadgesActive = activeAction == "Badges";
    var isOverviewActive = (activeAction == "ViewProfile" && controller == "Profile") || 
                          (activeAction == "Index" && controller == "Profile") ||
                          (activeAction == "ViewProfileBySlug" && controller == "Profile");
    
    var currentCulture = System.Globalization.CultureInfo.CurrentCulture.Name;
    var userSlug = ViewBag.Slug as string;
}

<div class="border-bottom border-light mb-4">
    <div class="overflow-x-auto scrollbar-hide p-2">
        <div class="d-flex justify-content-center min-w-max">
            <div class="d-inline-flex align-items-center gap-2 bg-white p-1.5 rounded-pill shadow-sm border">
                <a class="nav-link py-2 px-4 rounded-pill small fw-black text-uppercase tracking-widest transition-all @(isOverviewActive ? "bg-primary-red text-white shadow-sm" : "text-muted hover-bg-light")" 
                   asp-controller="Profile" 
                   asp-action="@(!string.IsNullOrEmpty(userSlug) ? "ViewProfileBySlug" : "ViewProfile")" 
                   asp-route-culture="@currentCulture" 
                   asp-route-slug="@userSlug" 
                   asp-route-id="@(string.IsNullOrEmpty(userSlug) ? userId : null)">
                    <i data-lucide="layout-dashboard" class="me-2" style="width: 14px;"></i> 
                    <span>@Localizer["Overview"]</span>
                </a>
                
                <a class="nav-link py-2 px-4 rounded-pill small fw-black text-uppercase tracking-widest transition-all @(isGalleryActive ? "bg-primary-red text-white shadow-sm" : "text-muted hover-bg-light")" 
                   asp-controller="Profile" asp-action="ViewUserGallery" asp-route-culture="@currentCulture" asp-route-id="@userId">
                    <i data-lucide="image" class="me-2" style="width: 14px;"></i> 
                    <span>@Localizer["Gallery"]</span>
                </a>
                
                <a class="nav-link py-2 px-4 rounded-pill small fw-black text-uppercase tracking-widest transition-all @(isInterestsActive ? "bg-primary-red text-white shadow-sm" : "text-muted hover-bg-light")" 
                   asp-controller="Profile" asp-action="Interests" asp-route-culture="@currentCulture" asp-route-id="@userId">
                    <i data-lucide="sparkles" class="me-2" style="width: 14px;"></i> 
                    <span>@Localizer["Interests"]</span>
                </a>
                
                <a class="nav-link py-2 px-4 rounded-pill small fw-black text-uppercase tracking-widest transition-all @(isBadgesActive ? "bg-primary-red text-white shadow-sm" : "text-muted hover-bg-light")" 
                   asp-controller="Profile" asp-action="Badges" asp-route-culture="@currentCulture" asp-route-id="@userId">
                    <i data-lucide="award" class="me-2" style="width: 14px;"></i> 
                    <span>@Localizer["Badges"]</span>
                </a>
                
                @if (isOwner)
                {
                    <a class="nav-link py-2 px-4 rounded-pill small fw-black text-uppercase tracking-widest transition-all @(isSettingsActive ? "bg-primary-red text-white shadow-sm" : "text-muted hover-bg-light")" 
                       asp-controller="ProfileSettings" asp-action="Index" asp-route-culture="@currentCulture">
                        <i data-lucide="settings" class="me-2" style="width: 14px;"></i> 
                        <span>@Localizer["Settings"]</span>
                    </a>
                }
            </div>
        </div>
    </div>
</div>