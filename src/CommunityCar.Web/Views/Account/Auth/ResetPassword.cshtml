@model CommunityCar.Application.Features.Account.ViewModels.Authentication.ResetPasswordVM
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<SharedResource> SharedLocalizer
@inject IStringLocalizer<AccountResource> AccountLocalizer
@{
    ViewData["Title"] = AccountLocalizer["ResetPassword"];
    Layout = "_AuthLayout";
}

<div class="container min-vh-100 d-flex flex-column justify-content-center py-5">
    <div class="text-center mb-5">
        <div class="position-relative d-inline-flex align-items-center justify-content-center mb-4">
            <div class="position-absolute inset-0 bg-primary opacity-25 rounded-circle blur-xl animate-pulse"></div>
            <div class="position-relative w-20 h-20 rounded-4 bg-card border border-border d-flex align-items-center justify-content-center text-primary shadow-lg" style="width: 80px; height: 80px;">
                <i data-lucide="lock" class="w-10 h-10" style="width: 40px; height: 40px;"></i>
            </div>
        </div>
        <h1 class="display-5 fw-black text-gradient tracking-tight mb-2">@AccountLocalizer["ResetPassword"]</h1>
        <p class="text-sm text-muted-foreground max-w-xs mx-auto">@AccountLocalizer["ResetPasswordDescription"]</p>
    </div>

    <div class="card card-premium shadow-lg mx-auto" style="max-width: 450px;">
        <div class="card-body p-4 p-md-5">
            <form asp-action="ResetPassword" method="post" class="d-grid gap-4">
                @Html.AntiForgeryToken()
                
                @if (!ViewData.ModelState.IsValid)
                {
                    <div class="alert alert-danger border-0 bg-danger-subtle text-danger py-3">
                        <div class="text-xs opacity-75">
                            @Html.ValidationSummary(false)
                        </div>
                    </div>
                }

                <input asp-for="Token" type="hidden" />

                <div class="form-group">
                    <label asp-for="Email" class="text-xs fw-black text-uppercase tracking-widest text-primary-red opacity-75 mb-2 d-block">@AccountLocalizer["Email"]</label>
                    <div class="position-relative">
                        <i data-lucide="mail" class="position-absolute translate-middle-y top-50 start-0 ms-3 text-muted" style="width: 16px; height: 16px;"></i>
                        <input asp-for="Email" 
                               class="form-control ps-5 py-3 rounded-3 border-border bg-muted-subtle" 
                               placeholder="name@work-email.com" 
                               autocomplete="email" />
                    </div>
                    <span asp-validation-for="Email" class="text-danger text-xs mt-1 d-block"></span>
                </div>

                <div class="form-group">
                    <label asp-for="NewPassword" class="text-xs fw-black text-uppercase tracking-widest text-primary-red opacity-75 mb-2 d-block">@AccountLocalizer["NewPassword"]</label>
                    <div class="position-relative">
                        <i data-lucide="lock" class="position-absolute translate-middle-y top-50 start-0 ms-3 text-muted" style="width: 16px; height: 16px;"></i>
                        <input asp-for="NewPassword" 
                               type="password" 
                               class="form-control ps-5 py-3 rounded-3 border-border bg-muted-subtle" 
                               placeholder="••••••••" 
                               autocomplete="new-password" />
                    </div>
                    <span asp-validation-for="NewPassword" class="text-danger text-xs mt-1 d-block"></span>
                </div>

                <div class="form-group">
                    <label asp-for="ConfirmPassword" class="text-xs fw-black text-uppercase tracking-widest text-primary-red opacity-75 mb-2 d-block">@AccountLocalizer["ConfirmPassword"]</label>
                    <div class="position-relative">
                        <i data-lucide="shield-check" class="position-absolute translate-middle-y top-50 start-0 ms-3 text-muted" style="width: 16px; height: 16px;"></i>
                        <input asp-for="ConfirmPassword" 
                               type="password" 
                               class="form-control ps-5 py-3 rounded-3 border-border bg-muted-subtle" 
                               placeholder="••••••••" 
                               autocomplete="new-password" />
                    </div>
                    <span asp-validation-for="ConfirmPassword" class="text-danger text-xs mt-1 d-block"></span>
                </div>

                <button type="submit" class="btn btn-primary-red py-3 rounded-4 mt-2">
                    @AccountLocalizer["ResetPassword"]
                </button>
            </form>
        </div>
    </div>

    <div class="text-center mt-5">
        <p class="text-sm text-muted-foreground mb-0">
            <a asp-action="Login" class="text-primary-red fw-bold text-decoration-none hover-underline d-inline-flex align-items-center gap-2">
                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                @AccountLocalizer["BackToSignIn"]
            </a>
        </p>
    </div>
</div>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
}