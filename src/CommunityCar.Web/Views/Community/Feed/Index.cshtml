@using Microsoft.Extensions.Localization
@model CommunityCar.Application.Features.Feed.DTOs.FeedResponse
@inject IViewLocalizer Localizer
@inject IStringLocalizer<SharedResource> SharedLocalizer
@{
    ViewData["Title"] = Localizer["PageTitle"];
    var feedType = ViewBag.FeedType as string ?? "personalized";
    var currentUserId = ViewBag.CurrentUserId as Guid?;
}

<div class="space-y-10 animate-in fade-in duration-700">
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div>
            <h1 class="text-3xl font-black text-foreground tracking-tight">@Localizer["FeedTitle"]</h1>
            <p class="text-sm text-muted-foreground font-medium opacity-70 mt-1">@Localizer["FeedSubtitle"]</p>
            <p class="text-xs text-primary font-bold mt-2">@Localizer["TestMessage"]</p>
        </div>
        <div class="flex items-center gap-3">
            <button class="inline-flex items-center gap-2.5 px-8 py-3 bg-primary text-primary-foreground hover:bg-primary/90 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-primary/20 active:scale-95 group" onclick="openCreatePostModal()">
                <i data-lucide="plus" class="w-4 h-4 group-hover:scale-125 transition-transform"></i>
                @Localizer["CreatePost"]
            </button>
        </div>
    </div>

    <!-- Enhanced Stories Section -->
    <div class="bg-card/40 backdrop-blur-md border border-border rounded-2xl shadow-xl mb-12 overflow-hidden group/stories transition-all hover:border-primary/20">
        <div class="p-4 flex justify-between items-center border-b border-border/50">
            <div class="flex items-center gap-2">
                <div class="p-1 px-2 bg-primary/10 rounded text-primary text-[10px] font-black uppercase tracking-widest">@Localizer["Live"]</div>
                <h5 class="text-sm font-black text-foreground uppercase tracking-tight">@Localizer["Stories"]</h5>
            </div>
            <span class="text-[10px] font-bold text-muted-foreground uppercase opacity-60">@Localizer["ShareYourCarMoments"]</span>
        </div>
        
        <div class="p-4">
            <div class="flex gap-5 overflow-x-auto pb-4 pt-1 snap-x no-scrollbar" id="storiesContainer">
                <!-- Add Story Button -->
                <div class="flex-shrink-0 flex flex-col items-center gap-2 cursor-pointer group/add-story snap-start" onclick="openCreateStoryModal()">
                    <div class="w-16 h-16 rounded-full border-2 border-dashed border-muted group-hover/add-story:border-primary group-hover/add-story:bg-primary/5 transition-all flex items-center justify-center relative shadow-inner">
                        <i data-lucide="plus" class="w-6 h-6 text-muted-foreground group-hover/add-story:text-primary transition-all group-hover/add-story:scale-125"></i>
                    </div>
                    <span class="text-[10px] font-bold text-muted-foreground uppercase tracking-widest group-hover/add-story:text-primary transition-colors">@Localizer["Add"]</span>
                </div>

                <!-- Existing Stories -->
                @foreach (var story in Model.Stories.Take(10))
                {
                    <div class="flex-shrink-0 flex flex-col items-center gap-2 cursor-pointer group/story snap-start" onclick="openStoryViewer('@story.Id')">
                        <div class="w-16 h-16 rounded-full p-0.5 relative transition-all group-hover/story:scale-105 active:scale-95 shadow-md">
                            @if (!story.IsViewed)
                            {
                                <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-primary via-primary/50 to-primary/80 p-0.5 animate-spin-slow">
                                    <div class="w-full h-full rounded-full bg-background shadow-inner"></div>
                                </div>
                            }
                            <div class="w-full h-full rounded-full overflow-hidden border border-border relative z-10 p-[1px] bg-background">
                                <img src="@(story.ThumbnailUrl ?? story.MediaUrl)" alt="@story.AuthorName" class="w-full h-full object-cover rounded-full @(story.IsViewed ? "opacity-60 grayscale-[0.2]" : "")" />
                            </div>
                        </div>
                        <span class="text-[10px] font-bold text-foreground text-center truncate w-16 opacity-80 group-hover/story:opacity-100 transition-opacity">@story.AuthorName.Split(' ')[0]</span>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Feed Navigation -->
    <div class="flex justify-center mb-12">
        <div class="inline-flex gap-1 p-1 bg-muted/40 backdrop-blur-sm rounded-xl border border-border/50 shadow-sm">
            <a class="inline-flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-black transition-all @(feedType == "personalized" ? "bg-background text-foreground shadow-md ring-1 ring-border" : "text-muted-foreground hover:text-foreground hover:bg-muted/30")" href="?feedType=personalized">
                <i class="fas fa-home text-[10px]"></i> @Localizer["ForYou"]
            </a>
            <a class="inline-flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-black transition-all @(feedType == "trending" ? "bg-background text-foreground shadow-md ring-1 ring-border" : "text-muted-foreground hover:text-foreground hover:bg-muted/30")" href="/feed/trending">
                <i class="fas fa-fire text-[10px]"></i> @Localizer["Trending"]
            </a>
            <a class="inline-flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-black transition-all @(feedType == "friends" ? "bg-background text-foreground shadow-md ring-1 ring-border" : "text-muted-foreground hover:text-foreground hover:bg-muted/30")" href="/feed/friends">
                <i class="fas fa-users text-[10px]"></i> @Localizer["Friends"]
            </a>
        </div>
    </div>

    <!-- Create Post Section -->
    @if (currentUserId.HasValue)
    {
        <div class="bg-card/50 backdrop-blur-md border border-border rounded-2xl shadow-lg mb-12 p-6 transition-all hover:border-primary/30 group/create">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-full overflow-hidden ring-2 ring-primary/10 group-hover/create:ring-primary/30 transition-all shadow-inner">
                    <img src="/images/default-avatar.png" alt="Your Avatar" class="w-full h-full object-cover" />
                </div>
                <div class="flex-1">
                    <button class="w-full bg-muted/30 hover:bg-muted/50 border border-transparent hover:border-border transition-all rounded-full px-5 py-2.5 text-sm text-muted-foreground text-left font-medium focus:ring-2 focus:ring-primary/20 outline-none" onclick="openCreatePostModal()">
                        @Localizer["WhatsOnYourMind"]
                    </button>
                </div>
            </div>
            <div class="flex items-center gap-1 mt-5 pt-2 border-t border-border/40">
                <button class="flex-1 py-2 text-xs font-bold text-muted-foreground hover:text-foreground hover:bg-muted/30 rounded-lg transition-all flex items-center justify-center gap-2 group/btn" onclick="openCreatePostModal('photo')">
                    <i class="fas fa-camera text-green-500 group-hover/btn:scale-110 transition-transform"></i> @Localizer["Photo"]
                </button>
                <div class="w-px h-4 bg-border/40"></div>
                <button class="flex-1 py-2 text-xs font-bold text-muted-foreground hover:text-foreground hover:bg-muted/30 rounded-lg transition-all flex items-center justify-center gap-2 group/btn" onclick="openCreatePostModal('review')">
                    <i class="fas fa-star text-orange-400 group-hover/btn:scale-110 transition-transform"></i> @Localizer["Review"]
                </button>
                <div class="w-px h-4 bg-border/40"></div>
                <button class="flex-1 py-2 text-xs font-bold text-muted-foreground hover:text-foreground hover:bg-muted/30 rounded-lg transition-all flex items-center justify-center gap-2 group/btn" onclick="openCreatePostModal('question')">
                    <i class="fas fa-question-circle text-blue-400 group-hover/btn:scale-110 transition-transform"></i> @Localizer["Ask"]
                </button>
            </div>
        </div>
    }

    <!-- Feed Items -->
    <div class="flex flex-col gap-12" id="feed-container">
        @foreach (var item in Model.FeedItems.Take(20))
        {
            <div class="bg-card/40 backdrop-blur-md border border-border rounded-2xl shadow-xl overflow-hidden transition-all hover:shadow-2xl hover:border-primary/10 group/feed-item" data-content-id="@item.Id" data-content-type="@item.ContentType">
                <!-- Post Header -->
                <div class="p-5 pb-3 flex items-start justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-11 h-11 rounded-full relative ring-2 ring-primary/5 group-hover/feed-item:ring-primary/20 transition-all shadow-inner group/avatar cursor-pointer">
                            <img src="@(item.AuthorAvatar ?? "/images/default-avatar.png")" alt="@item.AuthorName" class="w-full h-full object-cover rounded-full" />
                            @if (item.IsVerified)
                            {
                                <div class="absolute -bottom-1 -right-1 bg-white dark:bg-slate-900 rounded-full p-[2px] shadow-sm transform group-hover/avatar:scale-110 transition-transform">
                                    <i class="fas fa-check-circle text-blue-500 text-[10px]"></i>
                                </div>
                            }
                        </div>
                        <div class="flex flex-col">
                            <div class="flex items-center gap-2">
                                <h6 class="text-sm font-black text-foreground m-0 hover:text-primary transition-colors cursor-pointer">@item.AuthorName</h6>
                                @if (!string.IsNullOrEmpty(item.ReasonForShowing))
                                {
                                    <span class="px-1.5 py-0.5 rounded-full text-[8px] font-black bg-primary/10 text-primary uppercase tracking-tighter">@item.ReasonForShowing</span>
                                }
                            </div>
                            <div class="flex items-center gap-2 text-[10px] font-bold text-muted-foreground uppercase opacity-70">
                                <span>@item.TimeAgo</span>
                                @if (!string.IsNullOrEmpty(item.Location))
                                {
                                    <span class="opacity-50">•</span>
                                    <span class="flex items-center gap-1"><i class="fas fa-map-marker-alt text-[8px]"></i> @item.Location</span>
                                }
                            </div>
                        </div>
                    </div>
                    
                    <div class="relative group/menu">
                        <button class="p-2 text-muted-foreground hover:bg-muted/50 rounded-full transition-all focus:outline-none">
                            <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                        </button>
                        <div class="absolute right-0 mt-1 w-48 bg-popover/90 backdrop-blur-lg border border-border rounded-xl shadow-2xl z-50 py-2 hidden group-focus-within/menu:block transform origin-top-right transition-all">
                            <a class="flex items-center gap-3 px-4 py-2.5 text-sm font-bold text-foreground hover:bg-primary hover:text-primary-foreground transition-all mx-1 rounded-lg" href="#" onclick="bookmarkContent('@item.Id', '@item.ContentType')">
                                <i data-lucide="bookmark" class="w-4 h-4"></i> @Localizer["SavePost"]
                            </a>
                            <a class="flex items-center gap-3 px-4 py-2.5 text-sm font-bold text-foreground hover:bg-muted transition-all mx-1 rounded-lg" href="#" onclick="hideContent('@item.Id')">
                                <i data-lucide="eye-off" class="w-4 h-4"></i> @Localizer["Hide"]
                            </a>
                            <div class="mx-4 my-2 h-px bg-border/40"></div>
                            <a class="flex items-center gap-3 px-4 py-2.5 text-sm font-bold text-destructive hover:bg-destructive/10 transition-all mx-1 rounded-lg" href="#" onclick="reportContent('@item.Id', '@item.ContentType')">
                                <i data-lucide="flag" class="w-4 h-4"></i> @Localizer["Report"]
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Post Content -->
                <div class="p-5 pt-0">
                    <div class="space-y-3 mb-5">
                        @if (!string.IsNullOrEmpty(item.Title))
                        {
                            <h5 class="text-xl font-black text-foreground tracking-tight leading-tight">@item.Title</h5>
                        }
                        
                        @if (!string.IsNullOrEmpty(item.Summary) || !string.IsNullOrEmpty(item.Content))
                        {
                            <p class="text-[15px] text-foreground/90 leading-relaxed font-medium">
                                @(string.IsNullOrEmpty(item.Summary) ? (item.Content.Length > 280 ? item.Content.Substring(0, 280) + "..." : item.Content) : item.Summary)
                                @if (item.Content?.Length > 280)
                                {
                                    <button class="text-primary font-black ml-1 hover:underline text-xs" onclick="window.location.href='/posts/@item.Id'">@Localizer["ReadMore"]</button>
                                }
                            </p>
                        }
                    </div>

                    <!-- Enhanced Meta Info Row -->
                    <div class="flex flex-wrap items-center gap-3 mb-5">
                        @if (!string.IsNullOrEmpty(item.CarDisplayName))
                        {
                            <div class="inline-flex items-center gap-2 bg-primary/10 px-3 py-1.5 rounded-lg text-[10px] font-black text-primary border border-primary/20 shadow-sm uppercase tracking-wider">
                                <i class="fas fa-car text-[10px]"></i> @item.CarDisplayName
                            </div>
                        }

                        @if (item.Rating.HasValue)
                        {
                            <div class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-orange-500/10 border border-orange-500/20">
                                <div class="flex items-center text-orange-400">
                                    <i data-lucide="star" class="w-3.5 h-3.5 fill-current"></i>
                                </div>
                                <span class="text-[10px] font-black text-orange-600 dark:text-orange-400">@item.Rating.Value.ToString("F1") / 5.0</span>
                            </div>
                        }
                    </div>

                    <!-- Media Display -->
                    @if (!string.IsNullOrEmpty(item.ImageUrl) || item.ImageUrls.Any())
                    {
                        <div class="rounded-2xl overflow-hidden mb-5 border border-border/50 shadow-inner group/media relative">
                            @if (!string.IsNullOrEmpty(item.ImageUrl))
                            {
                                <img src="@item.ImageUrl" alt="Post Image" class="w-full h-auto object-cover max-h-[500px] transition-all duration-700 group-hover/media:scale-105 cursor-zoom-in" onclick="openImageModal('@item.ImageUrl')" />
                            }
                            else
                            {
                                <div class="grid grid-cols-2 gap-1 bg-muted/20">
                                    @foreach (var imageUrl in item.ImageUrls.Take(4))
                                    {
                                        <div class="h-48 overflow-hidden">
                                            <img src="@imageUrl" alt="Post Image" class="w-full h-full object-cover transition-all duration-700 group-hover/media:scale-110 cursor-zoom-in" onclick="openImageModal('@imageUrl')" />
                                        </div>
                                    }
                                </div>
                                @if (item.ImageUrls.Count() > 4)
                                {
                                    <div class="absolute bottom-4 right-4 bg-background/80 backdrop-blur-md px-4 py-2 rounded-xl text-xs font-black ring-1 ring-border shadow-2xl">
                                        +@(item.ImageUrls.Count() - 4) @Localizer["More"]
                                    </div>
                                }
                            }
                        </div>
                    }

                    <!-- Tags -->
                    @if (item.Tags.Any())
                    {
                        <div class="flex flex-wrap gap-2 mb-6 opacity-80">
                            @foreach (var tag in item.Tags.Take(6))
                            {
                                <span class="text-[10px] font-black text-primary bg-primary/5 px-2.5 py-1 rounded-full border border-primary/20 uppercase tracking-widest hover:bg-primary/10 transition-colors cursor-pointer">#@tag</span>
                            }
                        </div>
                    }

                    <!-- Stats Bar -->
                    <div class="flex items-center justify-between pt-4 border-t border-border/40">
                        <div class="flex gap-4">
                            @if (item.LikeCount > 0)
                            {
                                <div class="flex items-center gap-1.5 text-[11px] font-black text-muted-foreground uppercase tracking-widest">
                                    <div class="p-1 bg-destructive/10 rounded-full">
                                        <i data-lucide="heart" class="w-3 h-3 text-destructive fill-destructive"></i>
                                    </div>
                                    @item.LikeCount
                                </div>
                            }
                            @if (item.ViewCount > 0)
                            {
                                <div class="flex items-center gap-1.5 text-[11px] font-black text-muted-foreground uppercase tracking-widest">
                                    <i data-lucide="eye" class="w-3.5 h-3.5"></i>
                                    @item.ViewCount
                                </div>
                            }
                        </div>
                        <div class="flex gap-4 text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-60">
                            @if (item.CommentCount > 0)
                            {
                                <span>@item.CommentCount @Localizer["Comments"]</span>
                            }
                            @if (item.CommentCount > 0 && item.ShareCount > 0)
                            {
                                <span class="opacity-30">•</span>
                            }
                            @if (item.ShareCount > 0)
                            {
                                <span>@item.ShareCount @Localizer["Shares"]</span>
                            }
                        </div>
                    </div>
                </div>

                <!-- Action Toolbar -->
                <div class="flex p-2 bg-muted/10 border-t border-border/40 gap-1 mt-auto">
                    <button class="flex-1 py-3 text-xs font-black rounded-xl transition-all flex items-center justify-center gap-2 group/btn @(item.IsLikedByUser ? "text-destructive bg-destructive/5" : "text-muted-foreground hover:bg-muted/30 hover:text-foreground")" onclick="toggleLike('@item.Id', '@item.ContentType')">
                        <i data-lucide="heart" class="w-5 h-5 group-hover/btn:scale-125 transition-all @(item.IsLikedByUser ? "fill-current" : "")"></i> @Localizer["Like"]
                    </button>
                    <button class="flex-1 py-3 text-xs font-black text-muted-foreground hover:text-foreground hover:bg-muted/30 rounded-xl transition-all flex items-center justify-center gap-2 group/btn" onclick="toggleComments('@item.Id')">
                        <i data-lucide="message-circle" class="w-5 h-5 group-hover/btn:scale-125 transition-all"></i> @Localizer["Comment"]
                    </button>
                    <button class="flex-1 py-3 text-xs font-black text-muted-foreground hover:text-foreground hover:bg-muted/30 rounded-xl transition-all flex items-center justify-center gap-2 group/btn" onclick="shareContent('@item.Id', '@item.ContentType')">
                        <i data-lucide="share-2" class="w-5 h-5 group-hover/btn:scale-125 transition-all"></i> @Localizer["Share"]
                    </button>
                    <button class="w-12 h-12 flex items-center justify-center text-muted-foreground hover:text-yellow-500 hover:bg-yellow-500/5 rounded-xl transition-all group/bookmark @(item.IsBookmarkedByUser ? "text-yellow-500 bg-yellow-500/5 shadow-inner" : "")" onclick="bookmarkContent('@item.Id', '@item.ContentType')">
                        <i data-lucide="bookmark" class="w-5 h-5 group-hover/bookmark:scale-125 transition-all @(item.IsBookmarkedByUser ? "fill-current" : "")"></i>
                    </button>
                </div>

                <!-- Comments Dropdown -->
                <div class="hidden px-5 py-4 border-t border-border/40 bg-muted/10 animate-in slide-in-from-top-2 duration-300" id="comments-@item.Id">
                    <div class="flex gap-3 mb-6">
                        <div class="w-9 h-9 rounded-full overflow-hidden shrink-0 ring-2 ring-border">
                            <img src="/images/default-avatar.png" alt="Your Avatar" class="w-full h-full object-cover" />
                        </div>
                        <div class="flex-1 relative">
                            <input type="text" class="w-full bg-background border border-border rounded-full pl-4 pr-12 py-2 text-sm font-medium focus:ring-4 focus:ring-primary/10 transition-all outline-none" placeholder="@Localizer["WriteComment"]" onkeypress="handleCommentSubmit(event, '@item.Id', '@item.ContentType')" />
                            <button class="absolute right-2 top-1/2 -translate-y-1/2 p-1 text-primary hover:scale-110 transition-transform">
                                <i data-lucide="send" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                    <div class="comments-list space-y-4">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>
        }
    </div>

    <!-- Infinite Scroll Trigger -->
    @if (Model.HasMoreContent)
    {
        <div class="py-12 text-center">
            <button class="inline-flex items-center gap-3 bg-card border border-border px-8 py-3 rounded-2xl text-sm font-black text-foreground hover:bg-primary hover:text-primary-foreground hover:border-primary transition-all shadow-xl shadow-black/5 group" onclick="loadMoreFeedContent()">
                <i data-lucide="plus-circle" class="w-5 h-5 group-hover:rotate-90 transition-transform duration-500"></i>
                @Localizer["LoadMorePosts"]
            </button>
        </div>
    }

    <!-- Skeleton Loading Template (Hidden by default) -->
    <div id="skeleton-template" class="hidden">
        <div class="bg-card/40 backdrop-blur-md border border-border rounded-2xl shadow-xl overflow-hidden animate-pulse">
            <div class="p-5 pb-3 flex items-start gap-4">
                <div class="w-11 h-11 rounded-full bg-muted"></div>
                <div class="flex-1 space-y-2">
                    <div class="h-4 bg-muted rounded w-1/4"></div>
                    <div class="h-3 bg-muted rounded w-1/6"></div>
                </div>
            </div>
            <div class="p-5 pt-0 space-y-4">
                <div class="h-6 bg-muted rounded w-3/4"></div>
                <div class="space-y-2">
                    <div class="h-4 bg-muted rounded"></div>
                    <div class="h-4 bg-muted rounded w-5/6"></div>
                </div>
                <div class="h-48 bg-muted rounded-xl"></div>
            </div>
            <div class="flex p-2 bg-muted/10 border-t border-border/40 gap-1">
                <div class="flex-1 h-12 bg-muted/50 rounded-xl"></div>
                <div class="flex-1 h-12 bg-muted/50 rounded-xl"></div>
                <div class="flex-1 h-12 bg-muted/50 rounded-xl"></div>
                <div class="w-12 h-12 bg-muted/50 rounded-xl"></div>
            </div>
        </div>
    </div>
</div>

<!-- Conversion of Modals should happen in layout or partials if they are shared, but here is the content -->
<!-- I will omit the heavy Bootstrap HTML for modals and use Tailwind analogs -->

@section Scripts {
    @await Html.PartialAsync("~/Views/Community/Feed/_LocalizationScript.cshtml")
    <script src="~/js/feed.js"></script>
    <script src="~/js/stories.js"></script>
    <script>
        $(document).ready(function() {
            initializeFeed();
            initializeStories();
            
            setInterval(function() {
                refreshFeedStats();
                refreshStories();
            }, 300000);
        });

        function loadMoreFeedContent() {
            if (isLoading) return;
            
            isLoading = true;
            const loadButton = event.target.closest('button');
            const originalContent = loadButton.innerHTML;
            
            // Show loading state
            loadButton.innerHTML = `<i class="fas fa-spinner fa-spin w-5 h-5"></i> ${window.feedLocalizer?.Loading || 'Loading...'}`;
            loadButton.disabled = true;
            
            // Show skeleton loading
            showSkeletonLoading(10);
            
            currentPage++;
            
            fetch(`/feed?feedType=${feedType}&page=${currentPage}&pageSize=10`)
                .then(response => response.text())
                .then(html => {
                    // Parse the HTML to extract feed items
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const newItems = doc.querySelectorAll('[data-content-id]');
                    
                    // Remove skeleton loading
                    removeSkeletonLoading();
                    
                    // Append new items
                    const container = document.getElementById('feed-container');
                    newItems.forEach(item => {
                        container.appendChild(item.cloneNode(true));
                    });
                    
                    // Check if there are more items
                    const hasMore = doc.querySelector('.py-12.text-center button');
                    if (!hasMore) {
                        loadButton.style.display = 'none';
                    }
                })
                .catch(error => {
                    console.error('Error loading more content:', error);
                    currentPage--; // Revert page increment on error
                    removeSkeletonLoading();
                })
                .finally(() => {
                    isLoading = false;
                    loadButton.innerHTML = originalContent;
                    loadButton.disabled = false;
                });
        }

        function showSkeletonLoading(count) {
            const container = document.getElementById('feed-container');
            const template = document.getElementById('skeleton-template');
            
            for (let i = 0; i < count; i++) {
                const skeleton = template.cloneNode(true);
                skeleton.id = `skeleton-${i}`;
                skeleton.classList.remove('hidden');
                skeleton.classList.add('skeleton-item');
                container.appendChild(skeleton);
            }
        }

        function removeSkeletonLoading() {
            document.querySelectorAll('.skeleton-item').forEach(skeleton => {
                skeleton.remove();
            });
        }
    </script>
}