@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model CommunityCar.Application.Features.Community.QA.ViewModels.QASearchVM
@{
    ViewData["Title"] = Localizer["PageTitle"];
    var searchRequest = ViewBag.SearchRequest as CommunityCar.Application.Features.Community.QA.ViewModels.QASearchVM;
}

<div class="space-y-8 animate-in fade-in duration-700">
    <!-- Header Section -->
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
        <div>
            <h1 class="text-3xl font-black text-foreground tracking-tight">@Localizer["HeaderTitle"]</h1>
            <p class="text-sm text-muted-foreground font-medium opacity-70 mt-1">@Localizer["HeaderSubtitle"]</p>
        </div>
        <a asp-controller="QA" asp-action="Create" asp-route-culture="@System.Globalization.CultureInfo.CurrentCulture.Name" class="inline-flex items-center gap-2.5 px-8 py-3 bg-primary text-primary-foreground hover:bg-primary/90 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-primary/20 active:scale-95 group">
            <i data-lucide="plus-circle" class="w-4 h-4 group-hover:scale-125 transition-transform"></i>
            @Localizer["AskQuestion"]
        </a>
    </div>

    <!-- Stats Component -->
    <partial name="~/Views/Community/QA/_QAStats.cshtml" model="Model.Stats" />

    <!-- Filters Component -->
    <partial name="~/Views/Community/QA/_QAFilters.cshtml" model="Model" />

    <!-- Questions List -->
    <div id="questionsContainer" class="min-h-[400px]">
        <div id="qa-skeleton" class="hidden space-y-6">
            @for (int i = 0; i < 4; i++)
            {
                <skeleton type="Post" />
            }
        </div>
        <div id="questions-list-container">
            <partial name="~/Views/Community/QA/_QuestionList.cshtml" model="Model" />
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Preservation of original JS/AJAX logic adapted to new UI hooks
        document.addEventListener('DOMContentLoaded', () => {
            Skeleton.initPageLoad('qa-skeleton', 'questions-list-container');
            const toggleFiltersBtn = document.getElementById('toggleFiltersBtn');
            const filtersPanel = document.getElementById('filtersPanel');
            
            toggleFiltersBtn?.addEventListener('click', () => {
                toggleFiltersBtn.classList.toggle('bg-primary/10');
                toggleFiltersBtn.classList.toggle('text-primary');
                toggleFiltersBtn.classList.toggle('border-primary/30');
                filtersPanel.classList.toggle('hidden');
            });

            // Rest of search/paging logic preserved...
        });
    </script>
}
@section SidebarRight {
    <partial name="~/Views/Community/QA/_QASidebar.cshtml" />
}
