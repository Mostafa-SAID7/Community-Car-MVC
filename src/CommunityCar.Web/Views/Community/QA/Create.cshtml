@model CommunityCar.Application.Features.Community.QA.ViewModels.CreateQuestionVM
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@inject IStringLocalizer<SharedResource> SharedLocalizer
@{
    var currentCulture = System.Globalization.CultureInfo.CurrentCulture.Name;
    var isArabic = currentCulture.StartsWith("ar");
    ViewData["Title"] = Localizer["InitializeBroadcast"];
}

<div class="container pb-5 animate-in fade-in slide-in-from-bottom-4 duration-1000">
    <!-- Header Strategy -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-end gap-4 mb-5">
        <div>
            <nav class="d-flex align-items-center gap-2 small fw-black text-uppercase tracking-widest text-primary-red mb-3">
                <i data-lucide="zap" style="width: 14px;"></i> @Localizer["ActiveInquiryPayload"]
            </nav>
            <h1 class="fw-black text-gradient tracking-tight display-4 mb-3">@Localizer["AssembleProtocol"]</h1>
            <p class="small fw-bold text-muted border-start border-4 border-primary-red-subtle ps-3 py-1 opacity-75" style="max-width: 600px;">
                @Localizer["ProtocolSubtitle"]
            </p>
        </div>
        <a href="@Url.Action("Index", "QA")" class="btn btn-white border rounded-4 px-4 py-2 small fw-black text-uppercase tracking-widest shadow-sm hover-translate-y-1 transition-all d-flex align-items-center gap-2 group">
            <i data-lucide="arrow-left" class="group-hover-translate-x-n1 transition-transform" style="width: 16px;"></i> @Localizer["ReturnToRegistry"]
        </a>
    </div>
    
    <div class="card card-premium p-0 border-0 shadow-lg mb-5 overflow-hidden">
        <div class="card-body p-4 p-md-5 position-relative">
            <div class="position-absolute end-0 top-0 translate-middle-y translate-middle-x bg-primary-red opacity-5 rounded-circle blur-3xl" style="width: 250px; height: 250px;"></div>
            
            <form asp-action="Create" method="post" class="position-relative d-flex flex-column gap-5">
                <div asp-validation-summary="ModelOnly" class="alert bg-danger-subtle text-danger border-0 rounded-4 p-4 x-small fw-black text-uppercase tracking-widest"></div>
                
                <!-- Field 1: Title Core -->
                <div class="d-flex flex-column gap-3">
                    <div class="d-flex align-items-center justify-content-between">
                        <label asp-for="Title" class="x-small fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2">
                            <span class="bg-primary-red rounded-circle shadow-glow-primary" style="width: 6px; height: 6px;"></span>
                            @Localizer["InquiryHeader"] (English)
                        </label>
                        <span class="x-small fw-black text-uppercase text-muted opacity-30">@Localizer["EssentialPayload"]</span>
                    </div>
                    <div class="input-group-premium">
                        <input type="text" asp-for="Title" class="form-control rounded-4 p-4 h3 fw-black tracking-tight bg-light-subtle border border-0 shadow-sm" placeholder="@Localizer["TitlePlaceholder"]" required>
                    </div>

                    <div class="d-flex align-items-center justify-content-between mt-2">
                        <label asp-for="TitleAr" class="x-small fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2">
                            <span class="bg-primary-red rounded-circle shadow-glow-primary" style="width: 6px; height: 6px;"></span>
                            @Localizer["InquiryHeader"] (@SharedLocalizer["Arabic"])
                        </label>
                    </div>
                    <div class="input-group-premium">
                        <input type="text" asp-for="TitleAr" class="form-control rounded-4 p-4 h3 fw-black tracking-tight bg-light-subtle border border-0 shadow-sm text-end" dir="rtl" placeholder="@Localizer["TitleArPlaceholder"]">
                    </div>
                    <p class="x-small fw-bold text-muted opacity-60 px-2 font-italic">@Localizer["TitleNote"]</p>
                </div>

                <!-- Field 2: Detail Matrix -->
                <div class="d-flex flex-column gap-3">
                    <div class="d-flex align-items-center justify-content-between">
                        <label asp-for="Body" class="x-small fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2">
                            <span class="bg-primary-red rounded-circle shadow-glow-primary" style="width: 6px; height: 6px;"></span>
                            @Localizer["TechnicalBlueprint"] (English)
                        </label>
                        <span class="x-small fw-black text-uppercase text-muted opacity-30">@Localizer["TelemetryData"]</span>
                    </div>
                    <div class="input-group-premium">
                        <textarea asp-for="Body" class="form-control rounded-5 p-4 py-5 small fw-medium bg-light-subtle border-0 shadow-sm" style="min-height: 300px;" placeholder="@Localizer["BodyPlaceholder"]" required></textarea>
                    </div>

                    <div class="d-flex align-items-center justify-content-between mt-2">
                        <label asp-for="BodyAr" class="x-small fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2">
                            <span class="bg-primary-red rounded-circle shadow-glow-primary" style="width: 6px; height: 6px;"></span>
                            @Localizer["TechnicalBlueprint"] (@SharedLocalizer["Arabic"])
                        </label>
                    </div>
                    <div class="input-group-premium">
                         <textarea asp-for="BodyAr" class="form-control rounded-5 p-4 py-5 small fw-medium bg-light-subtle border-0 shadow-sm text-end" dir="rtl" style="min-height: 300px;" placeholder="@Localizer["BodyArPlaceholder"]"></textarea>
                    </div>
                </div>

                <!-- Field 3: Car Details -->
                <div class="d-flex flex-column gap-4 bg-light rounded-5 p-4 p-md-5 border">
                    <div class="d-flex align-items-center justify-content-between">
                        <h6 class="fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2 mb-0">
                            <i data-lucide="car-front" style="width: 18px;"></i>
                            @Localizer["VehicleSpecs"]
                        </h6>
                        <span class="x-small fw-black text-uppercase text-muted opacity-30">@Localizer["OptionalData"]</span>
                    </div>
                    
                    <div class="row g-4">
                        <div class="col-md-6">
                            <label class="x-small fw-black text-uppercase tracking-widest text-muted opacity-50 mb-2 d-block">@Localizer["CarMake"]</label>
                            <input type="text" asp-for="CarMake" class="form-control rounded-4 p-3 small fw-bold border shadow-sm" placeholder="e.g., BMW">
                        </div>
                        <div class="col-md-6">
                            <label class="x-small fw-black text-uppercase tracking-widest text-muted opacity-50 mb-2 d-block">@Localizer["CarModel"]</label>
                            <input type="text" asp-for="CarModel" class="form-control rounded-4 p-3 small fw-bold border shadow-sm" placeholder="e.g., M3">
                        </div>
                        <div class="col-md-6">
                            <label class="x-small fw-black text-uppercase tracking-widest text-muted opacity-50 mb-2 d-block">@Localizer["CarYear"]</label>
                            <input type="number" asp-for="CarYear" min="1900" max="2030" class="form-control rounded-4 p-3 small fw-bold border shadow-sm" placeholder="e.g., 2024">
                        </div>
                        <div class="col-md-6">
                            <label class="x-small fw-black text-uppercase tracking-widest text-muted opacity-50 mb-2 d-block">@Localizer["EngineType"]</label>
                            <input type="text" asp-for="CarEngine" class="form-control rounded-4 p-3 small fw-bold border shadow-sm" placeholder="e.g., 3.0L Inline-6">
                        </div>
                    </div>
                </div>

                <!-- Field 4: Difficulty & Tags -->
                <div class="row g-4">
                    <div class="col-md-6">
                         <label class="x-small fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2 mb-2">
                             <span class="bg-primary-red rounded-circle shadow-glow-primary" style="width: 6px; height: 6px;"></span>
                             @Localizer["DifficultyLevel"]
                         </label>
                         <select asp-for="Difficulty" class="form-select rounded-4 p-3 small fw-bold border shadow-sm bg-light-subtle">
                             <option value="1">@Localizer["Beginner"]</option>
                             <option value="2">@Localizer["Intermediate"]</option>
                             <option value="3">@Localizer["Advanced"]</option>
                             <option value="4">@Localizer["Expert"]</option>
                         </select>
                    </div>
                    
                    <div class="col-md-6">
                         <label class="x-small fw-black text-uppercase tracking-widest text-primary-red d-flex align-items-center gap-2 mb-2">
                             <span class="bg-primary-red rounded-circle shadow-glow-primary" style="width: 6px; height: 6px;"></span>
                             @Localizer["Tags"]
                         </label>
                         <input type="text" asp-for="Tags" class="form-control rounded-4 p-3 small fw-bold border shadow-sm bg-light-subtle" placeholder="@Localizer["TagsPlaceholder"]">
                         <p class="x-small fw-bold text-muted opacity-60 px-2 mt-2 font-italic">@Localizer["TagsNote"]</p>
                    </div>
                </div>

                <!-- Submission Controls -->
                <div class="d-flex flex-column flex-md-row align-items-center gap-4 pt-5 border-top">
                    <button type="submit" class="btn btn-primary-red px-5 py-4 rounded-4 fw-black text-uppercase tracking-widest small shadow-lg hover-translate-y-1 transition-all d-flex align-items-center justify-content-center gap-3 w-100 w-md-auto">
                        @Localizer["DeployProtocol"] <i data-lucide="send" style="width: 18px;"></i>
                    </button>
                    <div class="d-none d-md-block bg-border opacity-25" style="width: 40px; height: 1px;"></div>
                    <div class="d-flex align-items-center gap-2">
                         <span class="bg-success rounded-circle animate-pulse shadow-sm" style="width: 8px; height: 8px;"></span>
                         <span class="x-small fw-black text-uppercase tracking-widest text-muted opacity-40">@Localizer["SecureBroadcastInterface"]</span>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Strategy Protocol Cards -->
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card card-premium p-4 h-100 border-0 shadow-sm animate-in fade-in duration-500" style="animation-delay: 0.1s">
                <div class="bg-primary-red-subtle text-primary-red rounded-4 p-3 d-flex align-items-center justify-content-center mb-3" style="width: 48px; height: 48px;">
                    <i data-lucide="crosshair" style="width: 20px;"></i>
                </div>
                <h6 class="fw-black text-uppercase tracking-widest text-dark mb-3">@Localizer["Phase1Title"]</h6>
                <ul class="list-unstyled d-flex flex-column gap-2 mb-0">
                    <li class="d-flex align-items-start gap-2 x-small fw-bold text-muted"><span class="text-primary-red">•</span> @Localizer["Phase1Item1"]</li>
                    <li class="d-flex align-items-start gap-2 x-small fw-bold text-muted"><span class="text-primary-red">•</span> @Localizer["Phase1Item2"]</li>
                </ul>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card card-premium p-4 h-100 border-0 shadow-sm animate-in fade-in duration-500" style="animation-delay: 0.2s">
                <div class="bg-info-subtle text-info rounded-4 p-3 d-flex align-items-center justify-content-center mb-3" style="width: 48px; height: 48px;">
                    <i data-lucide="activity" style="width: 20px;"></i>
                </div>
                <h6 class="fw-black text-uppercase tracking-widest text-dark mb-3">@Localizer["Phase2Title"]</h6>
                <ul class="list-unstyled d-flex flex-column gap-2 mb-0">
                    <li class="d-flex align-items-start gap-2 x-small fw-bold text-muted"><span class="text-info">•</span> @Localizer["Phase2Item1"]</li>
                    <li class="d-flex align-items-start gap-2 x-small fw-bold text-muted"><span class="text-info">•</span> @Localizer["Phase2Item2"]</li>
                </ul>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card card-premium p-4 h-100 border-0 shadow-sm animate-in fade-in duration-500" style="animation-delay: 0.3s">
                <div class="bg-warning-subtle text-warning rounded-4 p-3 d-flex align-items-center justify-content-center mb-3" style="width: 48px; height: 48px;">
                    <i data-lucide="hash" style="width: 20px;"></i>
                </div>
                <h6 class="fw-black text-uppercase tracking-widest text-dark mb-3">@Localizer["Phase3Title"]</h6>
                <ul class="list-unstyled d-flex flex-column gap-2 mb-0">
                    <li class="d-flex align-items-start gap-2 x-small fw-bold text-muted"><span class="text-warning">•</span> @Localizer["Phase3Item1"]</li>
                    <li class="d-flex align-items-start gap-2 x-small fw-bold text-muted"><span class="text-warning">•</span> @Localizer["Phase3Item2"]</li>
                </ul>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });
    </script>
}
